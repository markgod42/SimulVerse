<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimulVerse ($MARK) - Reality is Mark's Grad School Project</title>
    <meta name="description" content="Welcome to SimulVerse - The universe is just a simulation created by grad student Mark. Earn $MARK tokens through daily prayers and secure better stats for your next simulation!">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://i.ibb.co/NgHMCZZX/image.png">

    <!-- Solana Wallet Adapter CSS -->
    <link rel="stylesheet" href="https://unpkg.com/@solana/wallet-adapter-react-ui@latest/styles.css" />
    
    <!-- Klip SDK -->
    <script src="https://cdn.jsdelivr.net/gh/klaytn/klip-sdk@latest/dist/klip-sdk.js"></script>
    
    <!-- TokenPocket SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@tokenpocket/sdk@latest/dist/index.min.js"></script>

    <style>
        /* General Styles */
        :root {
            --primary-color: #00ffc3;
            --background-color: #0d0d1a;
            --text-color: #e0e0e0;
            --header-bg: rgba(13, 13, 26, 0.8);
            --card-bg: rgba(25, 25, 40, 0.7);
            --glitch-color-1: #00ffc3;
            --glitch-color-2: #ff00c3;
            --warning-color: #ff6b35;
            --success-color: #00ff88;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Starfield Background */
        #starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: var(--background-color);
        }

        /* Matrix Rain Effect */
        #matrix-rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.2;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        section {
            padding: 80px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3em;
            text-align: center;
            margin-bottom: 40px;
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .section-description {
            text-align: center;
            max-width: 800px;
            margin: 0 auto 60px auto;
            font-size: 1.1em;
            line-height: 1.6;
        }
        
        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background-color: var(--header-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 15px 0;
            transition: top 0.3s;
        }
        
        /* Live Data Ticker */
        #live-data-ticker {
            position: fixed;
            top: 75px;
            width: 100%;
            background: rgba(26,26,46,0.98);
            color: var(--primary-color);
            z-index: 1200;
            padding: 8px 0 8px 0;
            border-bottom: 1px solid var(--primary-color);
            font-family: 'Orbitron', sans-serif;
            font-size: 1em;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        #live-data-ticker marquee, #live-data-ticker .ticker-content {
            background: transparent;
            padding: 0;
        }
        @media (max-width: 576px) {
            #live-data-ticker {
                top: 65px;
                font-size: 0.9em;
            }
        }
        /* 모달 내 지갑 로고 버튼 */
        .wallet-select-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1em;
        }
        .wallet-logo {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            background: #fff;
            box-shadow: 0 1px 4px rgba(0,0,0,0.08);
        }

        .ticker-content {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .ticker-item {
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }
        
        .ticker-item img {
            width: 16px;
            height: 16px;
        }

        .blink {
            animation: blink-animation 1s steps(2, start) infinite;
        }
        @keyframes blink-animation {
            to {
                visibility: hidden;
            }
        }

        .nav-container {
            display: grid;
            grid-template-columns: 1fr auto auto;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            gap: 10px;
        }
        #wallet-btn-container {
            display: flex;
            align-items: center;
            margin-left: 0;
            justify-content: flex-end;
        }
        @media (max-width: 992px) {
            .nav-container {
                grid-template-columns: 1fr auto;
            }
            #wallet-btn-container {
                justify-content: flex-start;
            }
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-img {
            width: 40px;
            height: 40px;
        }

        .logo-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5em;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .nav-menu {
            display: flex;
            gap: 25px;
        }
        
        .nav-link {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }
        
        .nav-link:hover {
            color: var(--primary-color);
        }
        
        .simulation-status {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9em;
            background-color: rgba(0, 255, 195, 0.1);
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid var(--primary-color);
        }
        
        .status-running {
            color: var(--primary-color);
            font-weight: 700;
        }

        .nav-toggle {
            display: none;
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            padding-top: 180px; /* Increased padding to account for ticker */
            padding-bottom: 80px;
        }

        .hero-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 40px;
        }
        
        .hero-content {
            flex: 1;
            max-width: 600px;
        }

        .hero-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 4em;
            margin-bottom: 20px;
        }
        
        .glitch {
            position: relative;
            color: #fff;
            text-shadow: 0.05em 0 0 var(--glitch-color-1), -0.05em 0 0 var(--glitch-color-2);
            animation: glitch 500ms infinite;
        }

        @keyframes glitch {
            0% { text-shadow: 0.05em 0 0 var(--glitch-color-1), -0.05em 0 0 var(--glitch-color-2); }
            14% { text-shadow: 0.05em 0 0 var(--glitch-color-1), -0.05em 0 0 var(--glitch-color-2); }
            15% { text-shadow: -0.05em -0.025em 0 var(--glitch-color-1), 0.025em 0.025em 0 var(--glitch-color-2); }
            49% { text-shadow: -0.05em -0.025em 0 var(--glitch-color-1), 0.025em 0.025em 0 var(--glitch-color-2); }
            50% { text-shadow: 0.025em 0.05em 0 var(--glitch-color-1), 0.05em 0 0 var(--glitch-color-2); }
            99% { text-shadow: 0.025em 0.05em 0 var(--glitch-color-1), 0.05em 0 0 var(--glitch-color-2); }
            100% { text-shadow: -0.025em 0 0 var(--glitch-color-1), -0.025em -0.05em 0 var(--glitch-color-2); }
        }

        .hero-subtitle {
            font-size: 1.8em;
            margin-bottom: 25px;
            color: #ccc;
        }
        
        .hero-description {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .hero-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn {
            padding: 12px 25px;
            border: 2px solid var(--primary-color);
            background: transparent;
            color: var(--primary-color);
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
            position: relative;
            text-align: center;
            text-decoration: none;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: var(--background-color);
        }
        
        .btn:hover {
            box-shadow: 0 0 15px var(--primary-color);
        }
        
        .btn .spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border: 2px solid #0d0d1a;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: none; /* Hidden by default */
        }
        
        .btn.loading .btn-text {
            opacity: 0;
        }

        .btn.loading .spinner {
            display: block;
        }

        .hero-image {
            flex: 1;
            text-align: center;
        }
        
        .mark-image {
            width: auto !important;
            height: auto !important;
            max-width: 100% !important;
            border-radius: 15px;
            border: 3px solid var(--primary-color);
            box-shadow: 0 0 25px rgba(0, 255, 195, 0.4);
            display: block;
            margin: 0 auto;
        }
        
        .image-caption {
            margin-top: 15px;
            font-style: italic;
            color: #aaa;
        }

        /* Prayer & Bug Report Section */
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: flex-start;
        }

        .form-container, .list-container {
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            background-color: rgba(13, 13, 26, 0.9);
            border: 1px solid var(--primary-color);
            border-radius: 5px;
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            box-sizing: border-box;
        }
        
        .form-group textarea {
            height: 120px;
            resize: vertical;
        }

        .validation-message {
            font-size: 0.9em;
            margin-top: 5px;
            height: 15px;
        }

        .cooldown-timer {
            margin-top: 15px;
            background-color: rgba(255, 165, 0, 0.2);
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }

        .list-container h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5em;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }

        .list-item {
            margin-bottom: 20px;
            padding: 15px;
            background-color: rgba(0, 255, 195, 0.05);
            border-left: 3px solid var(--primary-color);
            border-radius: 5px;
        }
        
        .list-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .item-nickname {
            font-weight: 700;
            color: #fff;
        }
        
        .item-reward {
            font-size: 0.9em;
            font-weight: 700;
            color: #ffd700;
        }

        .item-text {
            font-style: italic;
            color: #ccc;
            margin-bottom: 10px;
        }
        
        .bug-status, .bug-reaction {
            font-size: 0.9em;
            color: #aaa;
            margin-top: 10px;
        }
        .bug-status span {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Live Activity Section */
        #live-activity {
            text-align: center;
        }
        .activity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 800px;
            margin: 0 auto;
        }
        .activity-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid var(--primary-color);
        }
        .activity-title {
            font-family: 'Orbitron';
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        .activity-count {
            font-size: 3em;
            font-weight: 900;
            color: var(--primary-color);
        }
        .activity-card img {
            width: 50px;
            height: 50px;
            margin-top: 15px;
        }


        /* Tokenomics */
        .tokenomics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            margin-bottom: 60px;
        }
        
        .token-stats .stat-item {
            text-align: center;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .stat-number {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5em;
            font-weight: 900;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 1.2em;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .stat-note {
            font-size: 0.9em;
            color: #aaa;
        }
        
        .distribution-chart {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 10px;
        }
        
        .distribution-chart h3 {
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            font-size: 1.5em;
            margin-bottom: 30px;
        }
        
        .chart-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .chart-bar {
            width: var(--percentage);
            height: 25px;
            background: linear-gradient(90deg, #ff00c3, #00ffc3);
            border-radius: 5px;
        }
        
        .chart-label {
            margin-left: 15px;
            display: flex;
            align-items: baseline;
            gap: 10px;
        }
        
        .percentage {
            font-weight: 700;
            color: var(--primary-color);
        }

        .token-utilities h3 {
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            font-size: 2em;
            margin-bottom: 40px;
        }

        .utilities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .utility-item {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .utility-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 255, 195, 0.2);
        }
        
        .utility-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        .utility-title {
            font-weight: 700;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        /* Lore Section */
        .lore-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .lore-item {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 10px;
        }
        
        .lore-item h3 {
            color: var(--primary-color);
            font-family: 'Orbitron', sans-serif;
            font-size: 1.4em;
            margin-bottom: 15px;
        }
        
        .lore-main-image {
            max-width: 80%;
            height: auto;
            display: block;
            margin: 0 auto 60px auto;
            border-radius: 15px;
            border: 2px solid var(--primary-color);
            box-shadow: 0 0 30px rgba(0, 255, 195, 0.3);
        }
        
        /* NFT Section */
        .nft-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 40px;
        }

        .nft-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid var(--primary-color);
            box-shadow: 0 0 20px rgba(0, 255, 195, 0.2);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .nft-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 255, 195, 0.3);
        }

        .nft-image {
            height: 220px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron';
            font-size: 2.5em;
            color: white;
            text-shadow: 2px 2px 4px #000;
            position: relative;
        }

        .nft-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.4);
            transition: background 0.3s;
        }

        .nft-card:hover .nft-image::before {
             background: rgba(0,0,0,0.2);
        }


        .nft-image.indulgence {
             background-image: url('https://placehold.co/600x400/1a1a2e/00ffc3?text=Indulgence');
        }
        .nft-image.talisman {
             background-image: url('https://placehold.co/600x400/2e1a2e/ff00c3?text=Talisman');
        }
        .nft-image.citizenship {
             background-image: url('https://placehold.co/600x400/0042c3/ffffff?text=Citizenship');
        }
        .nft-image.transit-pass {
             background-image: url('https://placehold.co/600x400/c30053/ffffff?text=Transit+Pass');
        }
        
        .nft-content {
            padding: 25px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .nft-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8em;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .nft-description {
            flex-grow: 1;
            margin-bottom: 25px;
            line-height: 1.6;
        }


        /* FAQ Section */
        .faq-item {
            background: var(--card-bg);
            margin-bottom: 15px;
            border-radius: 5px;
        }
        
        .faq-question {
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
            font-size: 1.1em;
        }
        
        .faq-toggle {
            font-size: 1.5em;
            transition: transform 0.3s;
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out, padding 0.3s ease-in-out;
            padding: 0 20px;
        }
        
        .faq-item.active .faq-answer {
            max-height: 200px;
            padding: 0 20px 20px 20px;
        }

        .faq-item.active .faq-toggle {
            transform: rotate(45deg);
        }
        
        /* Community Section */
        .community-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .community-link {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            width: 200px;
            transition: transform 0.3s, box-shadow 0.3s;
            text-decoration: none;
            color: var(--text-color);
        }

        .community-link:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 255, 195, 0.2);
        }

        .link-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        .link-title {
            font-weight: 700;
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        
        /* Video Gallery Section */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 40px;
        }

        .video-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid var(--primary-color);
            box-shadow: 0 0 20px rgba(0, 255, 195, 0.2);
        }

        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        /* Footer */
        .footer {
            padding: 40px 0;
            text-align: center;
            background-color: #080810;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .nav-menu {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 70px;
                left: 0;
                width: 100%;
                background-color: var(--header-bg);
            }
            .nav-menu.active {
                display: flex;
            }
            .nav-link {
                text-align: center;
                padding: 15px;
            }
            .nav-toggle {
                display: flex;
                flex-direction: column;
                gap: 5px;
            }
            .nav-toggle span {
                width: 25px;
                height: 3px;
                background-color: var(--primary-color);
                border-radius: 3px;
            }
            .hero-container {
                flex-direction: column;
                text-align: center;
            }
            .hero-content {
                order: 2;
            }
            .hero-image {
                order: 1;
                margin-bottom: 30px;
            }
            .hero-buttons {
                grid-template-columns: 1fr;
            }
            .grid-container {
                grid-template-columns: 1fr;
            }
             .nft-grid {
                grid-template-columns: 1fr;
            }
            .video-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 576px) {
            .section-title {
                font-size: 2.2em;
            }
            .hero-title {
                font-size: 2.8em;
            }
            .simulation-status {
                display: none;
            }
            #live-data-ticker {
                top: 65px;
            }
            .hero {
                padding-top: 150px;
            }
        }

        /* ATA Notice */
        .ata-notice {
            background-color: rgba(255, 165, 0, 0.2);
            border: 1px solid orange;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ata-notice:hover {
            box-shadow: 0 0 15px rgba(255, 165, 0, 0.5);
            transform: translateY(-3px);
        }

        .ata-notice-title {
            font-weight: 700;
            color: orange;
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .ata-notice-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .ata-notice-text {
            font-size: 0.95em;
            line-height: 1.5;
        }

        .ata-notice-link {
            color: var(--primary-color);
            text-decoration: underline;
            font-weight: 600;
        }
        
        /* ATA Page Specific Styles */
        .ata-page-header .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .ata-page-header .back-link {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
            padding: 8px 16px;
            border: 1px solid var(--primary-color);
            border-radius: 5px;
        }

        .ata-page-header .back-link:hover {
            color: var(--primary-color);
            box-shadow: 0 0 10px var(--primary-color);
        }

        .ata-main-content {
            padding-top: 100px;
            padding-bottom: 60px;
        }

        .hero-section {
            text-align: center;
            padding: 60px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .ata-hero-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.5em;
            margin-bottom: 20px;
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .hero-subtitle {
            font-size: 1.5em;
            margin-bottom: 30px;
            color: #ccc;
        }

        .hero-description {
            font-size: 1.1em;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .alert-box {
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.2), rgba(255, 0, 195, 0.2));
            border: 2px solid var(--warning-color);
            border-radius: 10px;
            padding: 25px;
            margin: 40px auto;
            text-align: center;
            max-width: 1200px;
        }

        .alert-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8em;
            color: var(--warning-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .alert-icon {
            font-size: 1.2em;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .ata-section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 40px;
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .info-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid var(--primary-color);
            text-align: center;
        }

        .info-card h3 {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .cost-item:last-child {
            border-bottom: none;
            font-weight: 700;
            color: var(--primary-color);
        }

        .methods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
            margin-bottom: 60px;
        }

        .method-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid var(--primary-color);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .method-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 255, 195, 0.3);
        }

        .method-header {
            background: linear-gradient(135deg, var(--primary-color), var(--glitch-color-2));
            color: var(--background-color);
            padding: 20px;
            text-align: center;
        }

        .method-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .method-subtitle {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .method-content {
            padding: 25px;
        }

        .pros-list {
            background: rgba(0, 255, 136, 0.1);
            border-left: 4px solid var(--success-color);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .pros-title {
            font-weight: 700;
            color: var(--success-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pros-list ul {
            margin: 0;
            padding-left: 20px;
        }

        .pros-list li {
            margin-bottom: 5px;
        }

        .requirements {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .requirements-title {
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .step {
            background: rgba(0, 255, 195, 0.05);
            border-left: 3px solid var(--primary-color);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .step-title {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .step-number {
            background: var(--primary-color);
            color: var(--background-color);
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9em;
            font-weight: 700;
        }

        .step ol {
            margin: 0;
            padding-left: 20px;
        }

        .step li {
            margin-bottom: 8px;
        }

        .code-block {
            background: #1a1a2e;
            border: 1px solid var(--primary-color);
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            color: var(--primary-color);
        }

        .verification-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .verification-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid var(--success-color);
        }

        .verification-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--success-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .troubleshooting-item {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--warning-color);
        }

        .problem-title {
            font-weight: 700;
            color: var(--warning-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .solution {
            color: var(--success-color);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .checklist {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 30px;
            border: 2px solid var(--primary-color);
        }

        .checklist-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2em;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 25px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .checklist-item:last-child {
            border-bottom: none;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-color);
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox:hover {
            background: rgba(0, 255, 195, 0.2);
        }

        .checkbox.checked {
            background: var(--primary-color);
            color: var(--background-color);
        }

        .support-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .support-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid var(--primary-color);
            transition: transform 0.3s;
        }

        .support-card:hover {
            transform: translateY(-5px);
        }

        .support-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .support-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .support-link {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }

        .support-link:hover {
            text-decoration: underline;
        }

        .security-alert {
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.2), rgba(255, 107, 53, 0.2));
            border: 2px solid #ff4444;
            border-radius: 10px;
            padding: 25px;
            margin: 40px auto;
            text-align: center;
            max-width: 1200px;
        }

        .security-title {
            font-family: 'Orbitron', sans-serif;
            color: #ff4444;
            font-size: 1.5em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .animated-status {
            animation: status-glow 1.2s infinite alternate, status-move 3s infinite linear;
            color: #00ffc3;
            font-weight: 900;
            letter-spacing: 1.5px;
            text-shadow: 0 0 8px #00ffc3, 0 0 16px #00ffc3, 0 0 2px #fff;
            position: relative;
        }
        @keyframes status-glow {
            0% { text-shadow: 0 0 8px #00ffc3, 0 0 16px #00ffc3, 0 0 2px #fff; }
            100% { text-shadow: 0 0 20px #00ffc3, 0 0 40px #00ffc3, 0 0 8px #fff; }
        }
        @keyframes status-move {
            0% { left: 0px; }
            50% { left: 2px; }
            100% { left: 0px; }
        }

        /* Connect Wallet 버튼을 hero-content 내에서 왼쪽 정렬 */
        #wallet-btn-container {
            display: flex;
            justify-content: flex-start;
            margin-bottom: 24px;
        }
        @media (max-width: 576px) {
            #wallet-btn-container {
                justify-content: center;
            }
        }
    </style>
    <style id="tailwind-img-reset">
        img.mark-image {
            all: unset;
            display: block;
            max-width: 100% !important;
            width: auto !important;
            height: auto !important;
            border-radius: 15px;
            border: 3px solid var(--primary-color);
            box-shadow: 0 0 25px rgba(0, 255, 195, 0.4);
            margin: 0 auto;
            box-sizing: border-box !important;
        }
    </style>
</head>
<body>
    <div id="starfield"></div>
    <canvas id="matrix-rain"></canvas>

    <div id="main-page-wrapper">
        <header class="header">
            <nav class="nav">
                <div class="nav-container">
                    <div class="nav-logo">
                        <img src="https://i.ibb.co/NgHMCZZX/image.png" alt="SimulVerse Logo" class="logo-img">
                        <span class="logo-text">SimulVerse</span>
                    </div>
                    <div class="nav-menu" id="nav-menu">
                        <a href="#home" class="nav-link">Home</a>
                        <a href="#prayer" class="nav-link">Prayer Mining</a>
                        <a href="#bug-report" class="nav-link">Bug Report</a>
                        <a href="#nfts" class="nav-link">NFTs</a>
                        <a href="#tokenomics" class="nav-link">Tokenomics</a>
                        <a href="#lore" class="nav-link">Lore</a>
                        <a href="#faq" class="nav-link">FAQ</a>
                        <a href="#community" class="nav-link">Community</a>
                    </div>
                    <div class="simulation-status">
                        <span class="status-text">Simulation Status: <span class="status-running animated-status">Running (v23.19.84-beta)</span></span>
                    </div>
                    <div class="nav-toggle" id="nav-toggle">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </nav>
        </header>
        
        <!-- 오라클 영역 삽입 시작 -->
        <section id="oracle-section">
            <h2 class="section-title">Mark's Oracle</h2>
            <p class="section-description">
                The simulation's data stream is chaotic. Real-world events are merely side effects of Mark's questionable coding practices. Here's the real truth behind the headlines.
            </p>
            <div id="oracle-content">
                <!-- Loading State -->
                <div id="loading-state">
                    <div class="loader"></div>
                    <p style="margin-top: 1rem; font-family: 'Orbitron', sans-serif;">Contacting the Creator... Please wait.</p>
                </div>
                <!-- Content State (Initially hidden) -->
                <div id="news-state" class="hidden">
                    <div class="oracle-header">
                        <div class="oracle-breaking-news">
                            BREAKING NEWS
                        </div>
                        <div id="news-timestamp"></div>
                    </div>
                    <div class="oracle-headline-group">
                        <h3 class="oracle-label">SIMULATION EVENT LOG</h3>
                        <p id="real-headline"></p>
                    </div>
                    <div class="oracle-divider"></div>
                    <div class="oracle-explanation-group">
                        <h3 class="oracle-label" style="color: var(--primary-color);">The Real Truth (According to Mark)</h3>
                        <p id="mark-explanation"></p>
                    </div>
                </div>
                <!-- Error State (Initially hidden) -->
                <div id="error-state" class="hidden">
                     <p class="error-title">CONNECTION FAILED</p>
                     <p class="error-text">Mark seems to have tripped over the server's power cord again. The Oracle is temporarily offline. We'll try again shortly.</p>
                </div>
            </div>
        </section>
        <style>
            #oracle-section {
                border-bottom: none;
                padding-bottom: 40px;
            }
            #oracle-content {
                background-color: var(--card-bg, rgba(25, 25, 40, 0.7));
                border: 1px solid rgba(0, 255, 195, 0.3);
                border-radius: 15px;
                padding: 25px 40px;
                min-height: 300px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                box-shadow: 0 0 25px rgba(0, 255, 195, 0.3);
            }
            .loader {
                border: 4px solid rgba(255, 255, 255, 0.2);
                border-top: 4px solid var(--primary-color, #00ffc3);
                border-radius: 50%;
                width: 40px;
                height: 40px;
                animation: spin 1s linear infinite;
            }
            @keyframes spin {
                to { transform: rotate(360deg); }
            }
            #loading-state, #error-state {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
            }
            #news-state.hidden, #loading-state.hidden, #error-state.hidden {
                display: none;
            }
            .oracle-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
                border-bottom: 1px solid rgba(255, 82, 82, 0.5);
                padding-bottom: 0.75rem;
            }
            .oracle-breaking-news {
                background-color: #dc2626;
                color: white;
                font-family: 'Orbitron', sans-serif;
                font-weight: 700;
                padding: 0.25rem 0.75rem;
                border-radius: 5px;
                font-size: 0.875rem;
                letter-spacing: 0.1em;
                animation: pulse-red 1.5s infinite;
            }
            @keyframes pulse-red {
                50% { opacity: .7; }
            }
            #news-timestamp {
                color: #9ca3af;
                font-size: 0.875rem;
                font-family: monospace;
            }
            .oracle-headline-group, .oracle-explanation-group {
                margin-bottom: 1.5rem;
            }
            .oracle-headline-group:last-child, .oracle-explanation-group:last-child {
                margin-bottom: 0;
            }
            .oracle-label {
                font-family: 'Orbitron', sans-serif;
                color: #9ca3af;
                font-size: 0.875rem;
                text-transform: uppercase;
                letter-spacing: 0.1em;
            }
            #real-headline {
                font-size: 1.5rem;
                font-weight: 700;
                margin-top: 0.5rem;
            }
            .oracle-divider {
                width: 100%;
                height: 1px;
                background-color: rgba(255, 255, 255, 0.2);
                margin: 1.5rem 0;
            }
            #mark-explanation {
                font-size: 1.25rem;
                margin-top: 0.5rem;
                color: #d1d5db;
                font-style: italic;
                line-height: 1.6;
            }
            #error-state .error-title {
                font-size: 1.5rem;
                font-weight: 700;
                font-family: 'Orbitron', sans-serif;
                color: #ef4444;
            }
            #error-state .error-text {
                margin-top: 1rem;
                color: #9ca3af;
            }
        </style>
        <script>
            if (typeof window.oracleInitialized === 'undefined') {
                window.oracleInitialized = true;

                const loadingState = document.getElementById('loading-state');
                const newsState = document.getElementById('news-state');
                const errorState = document.getElementById('error-state');
                const realHeadlineEl = document.getElementById('real-headline');
                const markExplanationEl = document.getElementById('mark-explanation');
                const timestampEl = document.getElementById('news-timestamp');

                const GNEWS_API_KEY = '3be2a0342d72edff14aed39bd8124dc4'; 
                const GEMINI_API_KEY = 'AIzaSyBvZrakKFGFRrLOS9Xv5GUrI7I3vw1tu5g';

                const fallbackHeadlines = [
                    "Global internet outage causes widespread disruption.",
                    "Scientists baffled by newly discovered deep-sea creature that glows in the dark.",
                    "Stock market experiences unexpected volatility, traders blame 'a weird vibe'.",
                    "A record-breaking heatwave is currently affecting Europe.",
                    "A flock of birds was seen flying in a perfect square formation."
                ];

                async function fetchNewsHeadline() {
                    const topics = ['technology', 'entertainment', 'science', 'health'];
                    const randomTopic = topics[Math.floor(Math.random() * topics.length)];
                    const url = `https://gnews.io/api/v4/top-headlines?lang=en&topic=${randomTopic}&max=10&token=${GNEWS_API_KEY}`;
                    try {
                        const response = await fetch(url);
                        if (!response.ok) {
                            throw new Error(`GNews API request failed with status ${response.status}`);
                        }
                        const data = await response.json();
                        if (data.articles && data.articles.length > 0) {
                            const randomIndex = Math.floor(Math.random() * data.articles.length);
                            return data.articles[randomIndex].title;
                        } else {
                            throw new Error("No articles found in GNews response for the selected topic.");
                        }
                    } catch (error) {
                        console.error("Error fetching news:", error);
                        return fallbackHeadlines[Math.floor(Math.random() * fallbackHeadlines.length)];
                    }
                }

                async function getMarksExplanation(headline) {
                    const prompt = `You are Mark, a brilliant but lazy grad student who built our reality as a simulation. The following headline just broke in the real world: "${headline}".\nYour task is to creatively and humorously explain the "real" reason this happened from your perspective as the simulation's creator. Was it a bug? A failed experiment? Did you spill soda on the motherboard? Connect it to your life as a grad student. The explanation must be short, witty, and absolutely hilarious. Don't be too technical.`;
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`;
                    const payload = {
                        contents: [{
                            role: "user",
                            parts: [{ text: prompt }]
                        }]
                    };
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
                        if (!response.ok) {
                            throw new Error(`Gemini API request failed with status: ${response.status}`);
                        }
                        const result = await response.json();
                        if (result.candidates && result.candidates[0]?.content?.parts[0]?.text) {
                            return result.candidates[0].content.parts[0].text;
                        } else {
                            throw new Error("Invalid response structure from Gemini API.");
                        }
                    } catch (error) {
                        console.error("Error calling Gemini API:", error);
                        return "My connection to the main server is lagging... I probably forgot to pay the cloud bill. Anyway, something probably happened because I was trying to optimize the squirrel AI again.";
                    }
                }
                function updateTimestamp() {
                    const now = new Date();
                    const year = now.getFullYear();
                    const month = String(now.getMonth() + 1).padStart(2, '0');
                    const day = String(now.getDate()).padStart(2, '0');
                    const hours = String(now.getHours()).padStart(2, '0');
                    const minutes = String(now.getMinutes()).padStart(2, '0');
                    if(timestampEl) {
                        timestampEl.textContent = `${year}-${month}-${day} ${hours}:${minutes} (Local Time)`;
                    }
                }
                async function updateOracle() {
                    if (!loadingState || !newsState || !errorState) return;
                    loadingState.classList.remove('hidden');
                    newsState.classList.add('hidden');
                    errorState.classList.add('hidden');
                    try {
                        const headline = await fetchNewsHeadline();
                        const explanation = await getMarksExplanation(headline);
                        realHeadlineEl.textContent = headline;
                        markExplanationEl.textContent = explanation;
                        updateTimestamp();
                        loadingState.classList.add('hidden');
                        newsState.classList.remove('hidden');
                    } catch (error) {
                        console.error("Failed to update oracle:", error);
                        loadingState.classList.add('hidden');
                        errorState.classList.remove('hidden');
                    }
                }
                document.addEventListener('DOMContentLoaded', () => {
                    updateOracle();
                    setInterval(updateOracle, 1800000);
                    setInterval(updateTimestamp, 60000);
                });
            }
        </script>
        <!-- 오라클 영역 삽입 끝 -->

        <main>
            <div class="container">
                <section id="home" class="hero">
                    <div class="hero-container">
                        <div class="hero-content">
                            <div id="wallet-btn-container">
                                <button id="connect-wallet-btn" class="btn btn-secondary" style="white-space: nowrap; min-width: 120px;">Connect Wallet</button>
                            </div>
                            <h1 class="hero-title glitch" data-text="Welcome to SimulVerse">Welcome to SimulVerse</h1>
                            <h2 class="hero-subtitle">Reality is Just Mark's Grad School Project</h2>
                            <p class="hero-description">
                                You're living in a simulation created by a 26-year-old grad student named Mark. 
                                Earn $MARK tokens by praying to your creator and secure better stats for your next simulation!
                            </p>
                            
                            <div class="hero-buttons">
                                <a href="#prayer" class="btn btn-primary"><span class="btn-text">Start Praying</span></a>
                                <a href="#bug-report" class="btn btn-primary"><span class="btn-text">Report a Bug</span></a>
                                <button class="btn btn-secondary" onclick="window.open('https://raydium.io/', '_blank')"><span class="btn-text">Buy $MARK</span></button>
                                <button class="btn btn-tertiary" onclick="location.href='#nfts'"><span class="btn-text">Get NFTs</span></button>
                            </div>
                        </div>
                        
                        <div class="hero-image">
                            <div id="mark-image-shadow-root"></div>
                        </div>
                    </div>
                </section>
                
                <section id="live-activity">
                    <h2 class="section-title">Live Simulation Activity</h2>
                    <p class="section-description">Our universe is more active than ever. See how many entities are interacting with the Creator right now.</p>
                    <div class="activity-grid">
                        <div class="activity-card">
                            <div class="activity-title">Prayers Sent Today</div>
                            <div class="activity-count" id="prayers-today">0</div>
                            <img src="https://media.giphy.com/media/3oKIPuM1xe7G1i2iBi/giphy.gif" alt="Praying Hands GIF">
                        </div>
                        <div class="activity-card">
                            <div class="activity-title">Bugs Reported Today</div>
                            <div class="activity-count" id="bugs-today">0</div>
                             <img src="https://media.giphy.com/media/l2JJKs3I69qfaQleE/giphy.gif" alt="Bug GIF">
                        </div>
                    </div>
                </section>

                <section id="prayer" class="prayer-section">
                    <h2 class="section-title">Daily Prayer Mining</h2>
                    <p class="section-description">
                        Send your daily prayers, gratitude, and praise to Mark. Creative prayers earn more $MARK rewards! This form submits data to a Google Form in the background.
                    </p>
                    
                    <div class="grid-container">
                        <div class="form-container">
                            <!-- ATA Notice -->
                            <div class="ata-notice" onclick="togglePage('ata')">
                                <div class="ata-notice-title"><span class="ata-notice-icon">💡</span> Important: Pre-create Your $MARK ATA!</div>
                                <p class="ata-notice-text">To receive your $MARK rewards from prayers, you must first create an Associated Token Account (ATA) for $MARK in your Solana wallet. <span class="ata-notice-link">Click here for a step-by-step guide!</span></p>
                            </div>
                            <form id="prayer-form" class="prayer-form">
                                <input type="hidden" id="prayer-wallet-address" name="entry.594290298">
                                <div class="form-group">
                                    <label for="prayer-nickname">Nickname</label>
                                    <input type="text" id="prayer-nickname" name="entry.783862574" required 
                                           placeholder="How should Mark know you?">
                                </div>
                                
                                <div class="form-group">
                                    <label for="prayer-message">Prayer to Mark</label>
                                    <textarea id="prayer-message" name="entry.1842482460" required 
                                              placeholder="Dear Mark, thank you for creating this beautiful simulation... (Be creative for more rewards!)"></textarea>
                                </div>
                                
                                <button type="submit" class="btn btn-primary" id="submit-prayer">
                                    <span class="btn-text">Send Prayer to Mark</span>
                                    <span class="spinner"></span>
                                </button>
                                
                                <div class="cooldown-timer" id="prayer-cooldown-timer" style="display: none;"></div>
                            </form>
                            
                            <div id="prayer-form-status" style="margin-top:15px; text-align:center;"></div>
                        </div>
                        
                        <div class="list-container">
                            <h3>Recent Blessed Prayers</h3>
                            <div id="prayers-list">
                                <!-- Random prayers will be injected here by JavaScript -->
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="bug-report" class="bug-report-section">
                    <h2 class="section-title">Universe Bug Report</h2>
                    <p class="section-description">
                        Found a glitch in reality? A contradiction in the laws of physics? Report it here. The most humorous and creative bug reports will be rewarded by Mark for helping him debug the simulation.
                    </p>
                    <div class="grid-container">
                        <div class="form-container">
                            <!-- ATA Notice -->
                            <div class="ata-notice" onclick="togglePage('ata')">
                                <div class="ata-notice-title"><span class="ata-notice-icon">💡</span> Important: Pre-create Your $MARK ATA!</div>
                                <p class="ata-notice-text">To receive your $MARK rewards from bug reports, you must first create an Associated Token Account (ATA) for $MARK in your Solana wallet. <span class="ata-notice-link">Click here for a step-by-step guide!</span></p>
                            </div>
                            <form id="bug-report-form">
                                <input type="hidden" id="bug-wallet-address" name="entry.1376807882">
                                <div class="form-group">
                                    <label for="bug-nickname">Nickname</label>
                                    <input type="text" id="bug-nickname" name="entry.1658748352" required placeholder="Your bug-hunter alias">
                                </div>
                                <div class="form-group">
                                    <label for="bug-description">Bug Description</label>
                                    <textarea id="bug-description" name="entry.1890762573" required placeholder="e.g., Toast always lands jam-side down. Please patch this physics exploit."></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary" id="submit-bug-report">
                                    <span class="btn-text">Submit Bug Report</span>
                                    <span class="spinner"></span>
                                </button>
                                <div class="cooldown-timer" id="bug-cooldown-timer" style="display: none;"></div>
                            </form>
                            <div id="bug-form-status" style="margin-top:15px; text-align:center;"></div>
                        </div>
                        
                        <div class="list-container">
                            <h3>Recently Verified Bugs</h3>
                            <div id="bug-report-list">
                               <!-- Random bug reports will be injected here by JavaScript -->
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="nfts" class="nft-section">
                    <h2 class="section-title">Simulation Control NFTs</h2>
                    <p class="section-description">
                        Use $MARK to mint powerful NFTs that directly influence your existence within the simulation. Correct your 'data errors', manipulate probability, or even choose your destiny in the next simulation. A significant portion of $MARK used for minting is burned as a 'computational cost' to Mark's system.
                    </p>
                    <div class="nft-grid">
                        <div class="nft-card">
                            <div class="nft-image indulgence">
                                Indulgence
                            </div>
                            <div class="nft-content">
                                <h3 class="nft-title">Indulgence NFT</h3>
                                <p class="nft-description">In our universe, a 'sin' is not a moral failing, but a deviation from Mark's optimal simulation parameters. Use an Indulgence NFT to erase these 'error logs' from your profile, restore your Karma score, and reduce the chance of negative random events. It's not forgiveness, it's data purification.</p>
                                <button class="btn btn-primary" onclick="window.open('https://magiceden.io/', '_blank')">Mint on Magic Eden</button>
                            </div>
                        </div>
                        <div class="nft-card">
                            <div class="nft-image talisman">
                               Talisman
                            </div>
                            <div class="nft-content">
                                <h3 class="nft-title">Talisman NFT</h3>
                                <p class="nft-description">Bend the rules of reality. Talisman NFTs allow you to manipulate the 'probability field' around your profile. Increase your luck, boost skill acquisition rates, or resist system glitches. These come in various tiers of rarity, from a 'Common' charm for a minor boost to a 'Legendary' artifact that can make you immune to certain disasters.</p>
                                 <button class="btn btn-primary" onclick="window.open('https://magiceden.io/', '_blank')">Mint on Magic Eden</button>
                            </div>
                        </div>
                         <div class="nft-card">
                            <div class="nft-image citizenship">
                               Citizenship
                            </div>
                            <div class="nft-content">
                                <h3 class="nft-title">Simulation Citizenship NFT</h3>
                                <p class="nft-description">Secure your destiny for the next life. This NFT acts as your permanent identity within the SimulVerse. By acquiring and upgrading it, you can choose your starting conditions (job, talents, appearance) in the next simulation. Want to be reborn as a world-famous singer? There's an NFT for that.</p>
                                 <button class="btn btn-primary" onclick="window.open('https://magiceden.io/', '_blank')">Mint on Magic Eden</button>
                            </div>
                        </div>
                         <div class="nft-card">
                            <div class="nft-image transit-pass">
                               Transit Pass
                            </div>
                            <div class="nft-content">
                                <h3 class="nft-title">Simulation Transit Pass</h3>
                                <p class="nft-description">Tired of this reality? Use this Transit Pass NFT to move to one of Mark's other simulations. Explore a medieval fantasy world, survive a cyberpunk dystopia, or visit any other reality Mark is currently running. This is your ticket to a completely new experience, but be warned: the grass isn't always greener.</p>
                                 <button class="btn btn-primary" onclick="window.open('https://magiceden.io/', '_blank')">Mint on Magic Eden</button>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="tokenomics" class="tokenomics-section">
                    <h2 class="section-title">The Sacred $MARK Economy</h2>
                    
                    <div class="tokenomics-grid">
                        <div class="token-stats">
                            <div class="stat-item">
                                <div class="stat-number">42 Trillion</div>
                                <div class="stat-label">Total $MARK Supply</div>
                                <div class="stat-note">(42 = The Answer to Life, Universe & Everything)</div>
                            </div>
                            
                            <div class="stat-item">
                                <div class="stat-number">Solana</div>
                                <div class="stat-label">Blockchain</div>
                                <div class="stat-note">Fast & cheap like Mark's coding</div>
                            </div>
                        </div>
                        
                        <div class="distribution-chart">
                            <h3>Token Distribution</h3>
                            <div class="chart-container">
                                <div class="chart-item" style="--percentage: 50%">
                                    <div class="chart-bar"></div>
                                    <div class="chart-label"><span class="percentage">50%</span> <span class="description">Community Rewards & Airdrops</span></div>
                                </div>
                                <div class="chart-item" style="--percentage: 15%">
                                    <div class="chart-bar"></div>
                                    <div class="chart-label"><span class="percentage">15%</span> <span class="description">Public Sale & Marketing</span></div>
                                </div>
                                <div class="chart-item" style="--percentage: 15%">
                                    <div class="chart-bar"></div>
                                    <div class="chart-label"><span class="percentage">15%</span> <span class="description">Development Team (6mo lockup)</span></div>
                                </div>
                                <div class="chart-item" style="--percentage: 10%">
                                    <div class="chart-bar"></div>
                                    <div class="chart-label"><span class="percentage">10%</span> <span class="description">Liquidity Pool</span></div>
                                </div>
                                <div class="chart-item" style="--percentage: 10%">
                                    <div class="chart-bar"></div>
                                    <div class="chart-label"><span class="percentage">10%</span> <span class="description">Future Development (24mo lockup)</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="token-utilities">
                        <h3>Token Utilities</h3>
                        <div class="utilities-grid">
                            <div class="utility-item"><div class="utility-icon">🎮</div><div class="utility-title">Next Simulation Benefits</div><div class="utility-description">Better starting stats in your next life.</div></div>
                            <div class="utility-item"><div class="utility-icon">🌌</div><div class="utility-title">Simulation Travel Rights</div><div class="utility-description">Access to Mark's other universes (Fantasy, Cyberpunk, etc.).</div></div>
                            <div class="utility-item"><div class="utility-icon">🗳️</div><div class="utility-title">Community Governance</div><div class="utility-description">Vote on simulation updates and rule changes.</div></div>
                            <div class="utility-item"><div class="utility-icon">💰</div><div class="utility-title">Staking Rewards</div><div class="utility-description">Earn more $MARK by showing your faith (hodling).</div></div>
                            <div class="utility-item"><div class="utility-icon">🔒</div><div class="utility-title">Exclusive Content Access</div><div class="utility-description">Behind-the-scenes simulation secrets & early access.</div></div>
                            <div class="utility-item"><div class="utility-icon">🙏</div><div class="utility-title">Digital Prayer Rewards</div><div class="utility-description">Daily mining through creative devotion to Mark.</div></div>
                        </div>
                    </div>
                </section>

                <section id="lore" class="lore-section">
                    <h2 class="section-title">The Truth About Reality</h2>
                    <p class="section-description">
                        The universe is a complex tapestry of code, glitches, and Mark's questionable design choices. Below is a glimpse into the raw, unfiltered data stream that constitutes our existence.
                    </p>
                    <img src="https://i.ibb.co/GhSQzHs/3b2ea44c-71de-459c-9a21-01906230ee93.webp" alt="Abstract reality data stream" class="lore-main-image">
                    <div class="lore-grid">
                        <div class="lore-item">
                            <h3>Meet Your Creator</h3>
                            <p>Mark is a 26-year-old grad student who's probably procrastinating right now. He created our universe as his thesis project and occasionally remembers to maintain it between gaming sessions and existential crises.</p>
                        </div>
                        <div class="lore-item">
                            <h3>Why Reality is Buggy</h3>
                            <p>Quantum physics? That's just Mark's spaghetti code. Consciousness? A feature he accidentally created. Déjà vu? Copy-paste errors. The universe runs on duct tape and caffeine.</p>
                        </div>
                         <div class="lore-item">
                            <h3>System Maintenance Schedule</h3>
                            <p>When Mark has finals, natural disasters increase. During his vacation, everything runs smoothly. The 2020 pandemic? Mark was just learning to code in Python.</p>
                        </div>
                        <div class="lore-item">
                            <h3>Religious Interpretations</h3>
                            <p>Every religion is a flawed attempt to understand the simulation. The 'Messiah Protocol' was a major bug fix. The 'Karma Algorithm' determines your reincarnation variables. 'Heaven' is just the premium server.</p>
                        </div>
                        <div class="lore-item">
                            <h3>Multiple Simulations</h3>
                            <p>Mark runs several universes simultaneously. There's a medieval fantasy one, a cyberpunk dystopia, and this boring realistic one. You're stuck in the beta version.</p>
                        </div>
                        <div class="lore-item">
                            <h3>The Next Simulation</h3>
                            <p>When this universe ends (Mark graduates), your $MARK holdings determine your starting conditions in the next simulation. Think of it as cosmic karma with blockchain verification.</p>
                        </div>
                    </div>
                </section>
                
                <section id="video-gallery" class="video-gallery-section">
                    <h2 class="section-title">Dive Deeper into the Simulation</h2>
                    <p class="section-description">
                        Is our reality just a complex program? Are we characters in a cosmic game? Explore the mind-bending theories that inspired SimulVerse and question everything you think you know.
                    </p>
                    <div class="video-grid">
                        <div class="video-card">
                            <div class="video-wrapper">
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/CTNvcy5LZPo?si=3hjWI8-wGsH5NKYE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                            </div>
                        </div>
                        <div class="video-card">
                            <div class="video-wrapper">
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/tlTKTTt47WE?si=9gHnMd3-2JbzJF6I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                            </div>
                        </div>
                        <div class="video-card">
                            <div class="video-wrapper">
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/4wMhXxZ1zNM?si=-uX57DGDyeZ7_j-P" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                            </div>
                        </div>
                        <div class="video-card">
                            <div class="video-wrapper">
                               <iframe width="560" height="315" src="https://www.youtube.com/embed/Chfoo9NBEow?si=SXQSQDPHSz44v6xi" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                            </div>
                        </div>
                         <div class="video-card">
                            <div class="video-wrapper">
                               <iframe width="560" height="315" src="https://www.youtube.com/embed/pmcrG7ZZKUc?si=M12BBgM0qpPLI151" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                            </div>
                        </div>
                         <div class="video-card">
                            <div class="video-wrapper">
                               <iframe width="560" height="315" src="https://www.youtube.com/embed/ZFID_rgzE_Y?si=fyiv0mTMohEBWl5P" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="faq" class="faq-section">
                    <h2 class="section-title">Frequently Asked Questions</h2>
                    <div class="faq-container">
                        <div class="faq-item">
                            <div class="faq-question"><span>Is this project serious?</span><span class="faq-toggle">+</span></div>
                            <div class="faq-answer"><p>As serious as a grad student's thesis deadline. We're building a real community around a hilarious concept. The tokens are real, the laughs are real, but Mark might be fictional (or is he?).</p></div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question"><span>How do I earn $MARK?</span><span class="faq-toggle">+</span></div>
                            <div class="faq-answer"><p>Pray daily to Mark through our prayer system, participate in community events, report simulation bugs, or buy tokens directly on a Solana DEX. Creative prayers get higher rewards!</p></div>
                        </div>
                         <div class="faq-item">
                            <div class="faq-question"><span>"Next Simulation Benefits"?</span><span class="faq-toggle">+</span></div>
                            <div class="faq-answer"><p>Your $MARK holdings determine your starting stats (looks, intelligence, luck) in the next simulation. More tokens = better life. It's that simple. You might even become a Helper NPC.</p></div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question"><span>Is Mark real?</span><span class="faq-toggle">+</span></div>
                            <div class="faq-answer"><p>Define "real" in a simulation. Mark exists in our hearts, our memes, and possibly in a dorm room somewhere debugging the universe while eating ramen.</p></div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question"><span>When moon?</span><span class="faq-toggle">+</span></div>
                            <div class="faq-answer"><p>When Mark finishes debugging the economy.exe module. He's been putting it off because macroeconomics is hard and he'd rather work on the physics engine.</p></div>
                        </div>
                    </div>
                </section>

                <section id="community" class="community-section">
                    <h2 class="section-title">Join the Simulation Community</h2>
                    <p class="section-description">Connect with fellow simulation dwellers and stay updated on Mark's development progress.</p>
                    <div class="community-links">
                        <a href="https://x.com/simulverse42" class="community-link twitter" target="_blank"><div class="link-icon">🐦</div><div class="link-content"><div class="link-title">Twitter/X</div><div class="link-description">Follow for Mark's dev updates</div></div></a>
                        <a href="https://t.me/simulverse42" class="community-link telegram" target="_blank"><div class="link-icon">💬</div><div class="link-content"><div class="link-title">Telegram</div><div class="link-description">Chat with fellow dwellers</div></div></a>
                        <a href="https://www.instagram.com/simulverse42" class="community-link instagram" target="_blank"><div class="link-icon">📸</div><div class="link-content"><div class="link-title">Instagram</div><div class="link-description">Behind-the-scenes simulation content</div></div></a>
                    </div>
                    <div style="display:flex; justify-content:center; margin:32px 0 0 0;">
                        <button id="whitepaper-btn" class="btn btn-primary" style="font-size:1.1em; padding:14px 32px; border-radius:8px; background:linear-gradient(90deg,#00ffc3,#0d0d1a); color:#fff; border:none; box-shadow:0 2px 12px rgba(0,0,0,0.08); cursor:pointer; transition:box-shadow 0.2s;">Whitepaper</button>
                    </div>
                </section>
            </div>
        </main>

        <footer class="footer">
            <div class="container">
                <p class="footer-disclaimer">This is a meme project. Mark is not responsible for your life choices. $MARK is a meme coin with no intrinsic value or expectation of financial return.</p>
                <p class="footer-copyright">© 2024 SimulVerse. All rights reserved in this simulation.</p>
            </div>
        </footer>
    </div>

    <div id="ata-page-wrapper" style="display: none;">
        <header class="header ata-page-header">
            <nav class="nav">
                <div class="nav-container">
                    <div class="nav-logo">
                        <img src="https://i.ibb.co/NgHMCZZX/image.png" alt="SimulVerse Logo" class="logo-img">
                        <span class="logo-text">SimulVerse</span>
                    </div>
                    
                    <a href="#" onclick="event.preventDefault(); togglePage('main')" class="back-link">← Back to SimulVerse</a>
                </div>
            </nav>
        </header>

        <main class="ata-main-content">
            <div class="container">
                <!-- Hero Section -->
                <section class="hero-section">
                    <h1 class="ata-hero-title glitch" data-text="$MARK Token Setup">$MARK Token Setup</h1>
                    <h2 class="hero-subtitle">Essential Guide for Mark's Simulation Rewards</h2>
                    <p class="hero-description">
                        Before you can receive $MARK tokens from your prayers and bug reports, you need to prepare your wallet. 
                        Think of it as registering your bank account in Mark's cosmic financial system.
                    </p>
                </section>

                <!-- Important Notice -->
                <div class="alert-box">
                    <div class="alert-title">
                        <span class="alert-icon">🚨</span>
                        Critical Simulation Protocol
                    </div>
                    <p><strong>To receive $MARK tokens from prayers and bug reports, you MUST pre-create an Associated Token Account (ATA).</strong></p>
                    <p>ATA creation fees are borne by the individual (approx. 0.5 USD). This ensures fair airdrops for more users and prevents Mark's server from crashing under the weight of unprepared wallets.</p>
                </div>

                <!-- Token Information -->
                <section class="section">
                    <h2 class="ata-section-title">Simulation Parameters</h2>
                    <div class="info-grid">
                        <div class="info-card">
                            <h3>💰 Required Costs</h3>
                            <div class="cost-item">
                                <span>ATA Creation Fee:</span>
                                <span>0.00204 SOL</span>
                            </div>
                            <div class="cost-item">
                                <span>Transaction Fee:</span>
                                <span>0.000005 SOL</span>
                            </div>
                            <div class="cost-item">
                                <span>Recommended Balance:</span>
                                <span>0.005 SOL</span>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <h3>🎯 Token Information</h3>
                            <p><strong>Token Name:</strong> $MARK</p>
                            <p><strong>Token Mint Address:</strong><br><code>4200000000000000000</code></p>
                            <p><strong>Network:</strong> Solana (Mark's preferred blockchain because it's fast and cheap like his coding)</p>
                        </div>
                    </div>
                </section>

                <!-- Methods Section -->
                <section class="section">
                    <h2 class="ata-section-title">Choose Your Wallet Interface</h2>
                    <p style="text-align: center; margin-bottom: 40px; font-size: 1.1em;">
                        Mark supports multiple wallet interfaces. Choose the one that doesn't make you want to debug reality.
                    </p>

                    <div class="methods-grid">
                        <!-- Method 1: Backpack -->
                        <div class="method-card">
                            <div class="method-header">
                                <div class="method-title">🎒 Backpack Wallet</div>
                                <div class="method-subtitle">All-in-one Solana Powerhouse</div>
                            </div>
                            <div class="method-content">
                                <div class="pros-list">
                                    <div class="pros-title">✅ Pros</div>
                                    <ul>
                                        <li>Multi-chain support (Solana, Ethereum, more)</li>
                                        <li>Easy NFT & token management</li>
                                        <li>Integrated xNFT and dApp browser</li>
                                        <li>Fast, secure, and user-friendly</li>
                                    </ul>
                                </div>
                                <div class="requirements">
                                    <div class="requirements-title">📋 Requirements</div>
                                    <ul>
                                        <li>Backpack Extension (Chrome/Brave/Firefox)</li>
                                        <li>Minimum 0.005 SOL</li>
                                    </ul>
                                </div>
                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">1</span>
                                        Install Backpack
                                    </div>
                                    <ol>
                                        <li>Visit <a href="https://backpack.app/" target="_blank" style="color: var(--primary-color);">backpack.app</a></li>
                                        <li>Click "Download" and install the extension</li>
                                        <li>Pin Backpack to your browser toolbar</li>
                                    </ol>
                                </div>
                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">2</span>
                                        Create or Import Wallet
                                    </div>
                                    <ol>
                                        <li>Open Backpack extension</li>
                                        <li>Click "Create a new wallet" or "Import wallet"</li>
                                        <li>Securely back up your recovery phrase</li>
                                    </ol>
                                </div>
                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">3</span>
                                        Deposit SOL
                                    </div>
                                    <ol>
                                        <li>Click "Receive" in Backpack</li>
                                        <li>Copy your Solana address</li>
                                        <li>Send at least 0.005 SOL from an exchange</li>
                                    </ol>
                                </div>
                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">4</span>
                                        Add $MARK Token (Create ATA)
                                    </div>
                                    <ol>
                                        <li>Click "Add Token" in Backpack</li>
                                        <li>Enter Token Mint Address: <code>4200000000000000000</code></li>
                                        <li>Approve the transaction to create your ATA</li>
                                        <li>Done! $MARK will appear in your wallet</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <!-- Method 2: Phantom -->
                        <div class="method-card">
                            <div class="method-header">
                                <div class="method-title">👻 Phantom Wallet</div>
                                <div class="method-subtitle">Most Popular Choice</div>
                            </div>
                            <div class="method-content">
                                <div class="pros-list">
                                    <div class="pros-title">✅ Pros</div>
                                    <ul>
                                        <li>Optimized for Solana</li>
                                        <li>Intuitive interface</li>
                                        <li>Mobile + Browser support</li>
                                    </ul>
                                </div>
                                
                                <div class="requirements">
                                    <div class="requirements-title">📋 Requirements</div>
                                    <ul>
                                        <li>Phantom app or browser extension</li>
                                        <li>Minimum 0.005 SOL</li>
                                    </ul>
                                </div>

                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">1</span>
                                        Install Phantom
                                    </div>
                                    <ol>
                                        <li>Visit <a href="https://phantom.app" target="_blank" style="color: var(--primary-color);">phantom.app</a></li>
                                        <li>Click "Download"</li>
                                        <li>Install extension or mobile app</li>
                                    </ol>
                                </div>

                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">2</span>
                                        Create/Restore Wallet
                                    </div>
                                    <ol>
                                        <li><strong>New Wallet:</strong> Click "Create a new wallet"</li>
                                        <li>Set password and back up seed phrase</li>
                                        <li><strong>Existing:</strong> Click "I already have a wallet"</li>
                                    </ol>
                                </div>

                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">3</span>
                                        Deposit SOL
                                    </div>
                                    <ol>
                                        <li>Click "Receive" on main screen</li>
                                        <li>Copy wallet address</li>
                                        <li>Send at least 0.005 SOL from exchange</li>
                                    </ol>
                                </div>

                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">4</span>
                                        Add $MARK Token
                                    </div>
                                    <ol>
                                        <li>Click "Tokens" tab in bottom menu</li>
                                        <li>Click top-right "+" button</li>
                                        <li>Select "Manage token list"</li>
                                        <li>Enter: <code>4200000000000000000</code></li>
                                        <li>Click "Add Token" and approve</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <!-- Method 3: Solflare -->
                        <div class="method-card">
                            <div class="method-header">
                                <div class="method-title">🔥 Solflare</div>
                                <div class="method-subtitle">Advanced Features</div>
                            </div>
                            <div class="method-content">
                                <div class="pros-list">
                                    <div class="pros-title">✅ Pros</div>
                                    <ul>
                                        <li>Native Solana support</li>
                                        <li>Rich advanced features</li>
                                        <li>Hardware wallet integration</li>
                                    </ul>
                                </div>
                                
                                <div class="requirements">
                                    <div class="requirements-title">📋 Requirements</div>
                                    <ul>
                                        <li>Solflare app or browser</li>
                                        <li>Minimum 0.005 SOL</li>
                                    </ul>
                                </div>

                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">1</span>
                                        Install Solflare
                                    </div>
                                    <ol>
                                        <li>Visit <a href="https://solflare.com" target="_blank" style="color: var(--primary-color);">solflare.com</a></li>
                                        <li>Download browser extension or mobile app</li>
                                        <li>Run after installation</li>
                                    </ol>
                                </div>

                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">2</span>
                                        Wallet Setup
                                    </div>
                                    <ol>
                                        <li>Select "Create a new wallet" or "Access wallet"</li>
                                        <li>Set password</li>
                                        <li>Securely back up seed phrase</li>
                                    </ol>
                                </div>

                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">3</span>
                                        Deposit SOL
                                    </div>
                                    <ol>
                                        <li>Click "Receive" button</li>
                                        <li>Copy address</li>
                                        <li>Send at least 0.005 SOL from exchange</li>
                                    </ol>
                                </div>

                                <div class="step">
                                    <div class="step-title">
                                        <span class="step-number">4</span>
                                        Create Token Account
                                    </div>
                                    <ol>
                                        <li>Select "Tokens" tab</li>
                                        <li>Click "Add Token"</li>
                                        <li>Enter Mint Address: <code>4200000000000000000</code></li>
                                        <li>Click "Create Account" and approve</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Verification Section -->
                <section class="section">
                    <h2 class="ata-section-title">Verify Your Setup</h2>
                    <div class="verification-grid">
                        <div class="verification-card">
                            <div class="verification-title">
                                🔍 Check in Wallet
                            </div>
                            <p><strong>MetaMask:</strong> Check "Tokens" tab in your Solana account. Success if new token shows with "0" balance.</p>
                            <p><strong>Phantom/Solflare:</strong> Check for new token in token list. Normal if balance is "0".</p>
                        </div>
                        
                        <div class="verification-card">
                            <div class="verification-title">
                                🔍 Check on Blockchain
                            </div>
                            <ol>
                                <li>Access <a href="https://solscan.io" target="_blank" style="color: var(--primary-color);">Solscan.io</a></li>
                                <li>Enter your wallet address and search</li>
                                <li>Click "Token Accounts" tab</li>
                                <li>Confirm ATA existence for the token</li>
                            </ol>
                        </div>
                    </div>
                </section>

                <!-- Troubleshooting -->
                <section class="section">
                    <h2 class="ata-section-title">Debug Common Issues</h2>
                    
                    <div class="troubleshooting-item">
                        <div class="problem-title">❌ "Insufficient funds" error</div>
                        <div class="solution">Solution:</div>
                        <p>Deposit at least 0.005 SOL into your wallet. Mark's simulation requires proper funding.</p>
                    </div>

                    <div class="troubleshooting-item">
                        <div class="problem-title">❌ Token not visible in wallet</div>
                        <div class="solution">Solution:</div>
                        <ul>
                            <li>Refresh wallet (F5 or restart app)</li>
                            <li>Retry manual token addition</li>
                            <li>Check internet connection (Mark's servers are sometimes slow)</li>
                        </ul>
                    </div>

                    <div class="troubleshooting-item">
                        <div class="problem-title">❌ Transaction failed</div>
                        <div class="solution">Solution:</div>
                        <ul>
                            <li>Retry after 5-10 minutes</li>
                            <li>Avoid network congestion times</li>
                            <li>Increase transaction fee (advanced settings)</li>
                        </ul>
                    </div>

                    <div class="troubleshooting-item">
                        <div class="problem-title">❌ Incorrect Token Address</div>
                        <div class="solution">Verification Method:</div>
                        <ul>
                            <li><strong>Correct format:</strong> 44-character Base58 string</li>
                            <li><strong>Example:</strong> <code>99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg</code></li>
                            <li><strong>Incorrect:</strong> Addresses starting with <code>0x</code> (that's Ethereum, not Solana)</li>
                        </ul>
                    </div>
                </section>

                <!-- Final Checklist -->
                <section class="section">
                    <div class="checklist">
                        <div class="checklist-title">🎉 Pre-Flight Checklist</div>
                        <p style="text-align: center; margin-bottom: 25px;">Before participating in prayers and bug reports, verify all systems are go:</p>
                        
                        <div class="checklist-item">
                            <div class="checkbox" onclick="toggleCheck(this)">✓</div>
                            <span>Wallet created (MetaMask/Phantom/Solflare)</span>
                        </div>
                        <div class="checklist-item">
                            <div class="checkbox" onclick="toggleCheck(this)">✓</div>
                            <span>Solana network connection confirmed</span>
                        </div>
                        <div class="checklist-item">
                            <div class="checkbox" onclick="toggleCheck(this)">✓</div>
                            <span>Minimum 0.005 SOL held</span>
                        </div>
                        <div class="checklist-item">
                            <div class="checkbox" onclick="toggleCheck(this)">✓</div>
                            <span>$MARK token ATA created</span>
                        </div>
                        <div class="checklist-item">
                            <div class="checkbox" onclick="toggleCheck(this)">✓</div>
                            <span>Token visible in wallet (0 balance is normal)</span>
                        </div>
                        <div class="checklist-item">
                            <div class="checkbox" onclick="toggleCheck(this)">✓</div>
                            <span>Wallet address copied accurately</span>
                        </div>
                    </div>
                </section>

                <!-- Support Section -->
                <section class="section">
                    <h2 class="ata-section-title">Need Help? Mark's Support Team</h2>
                    <div class="support-grid">
                        <div class="support-card">
                            <div class="support-icon">💬</div>
                            <div class="support-title">Telegram</div>
                            <p>Immediate community assistance</p>
                            <a href="https://t.me/simulverse42" target="_blank" class="support-link">Join Chat</a>
                        </div>
                        
                        <div class="support-card">
                            <div class="support-icon">📚</div>
                            <div class="support-title">Documentation</div>
                            <p>Official Solana guides</p>
                            <a href="https://docs.solana.com/" target="_blank" class="support-link">Read Docs</a>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <p><strong>Support Hours:</strong></p>
                        <p>Community Support: 24/7</p>
                    </div>
                </section>

                <!-- Security Alert -->
                <div class="security-alert">
                    <div class="security-title">
                        ⚠️ Security Protocol
                    </div>
                    <p><strong>Never share your seed phrase or private keys with anyone.</strong> Mark's official team will never ask for this information. Only receive information from official channels and avoid suspicious links. Your wallet security is your responsibility in this simulation.</p>
                </div>

                <!-- Ready Message -->
                <section class="section" style="text-align: center;">
                    <h2 class="ata-section-title">🚀 Ready for Mark's Rewards!</h2>
                    <p style="font-size: 1.2em; margin-bottom: 30px;">
                        Congratulations! Your wallet is now configured to receive $MARK tokens. 
                        You can now participate in daily prayers and bug reports to earn rewards from Mark's simulation.
                    </p>
                    <a href="#" onclick="event.preventDefault(); togglePage('main')" style="display: inline-block; padding: 15px 30px; background: var(--primary-color); color: var(--background-color); text-decoration: none; border-radius: 5px; font-weight: 700; font-size: 1.1em; transition: all 0.3s;">
                        Return to SimulVerse →
                    </a>
                </section>
            </div>
        </main>

        <footer class="footer">
            <div class="container">
                <p class="footer-text">
                    This guide is provided by Mark's development team. $MARK is a meme token with no intrinsic value or expectation of financial return. 
                    Participate at your own risk in this cosmic simulation.
                </p>
            </div>
        </footer>
    </div>

    <!-- =================================================================================== -->
    <!-- WHITEPAPER SECTION - START OF MODIFICATION -->
    <!-- =================================================================================== -->
    <div id="whitepaper-page-wrapper" style="display:none; min-height:100vh;">
        <div class="container">
            <style>
                /* Whitepaper-specific styles to match the main theme */
                #whitepaper-page-wrapper {
                    background-color: transparent; /* MODIFIED: Made background transparent for matrix effect */
                    color: var(--text-color);
                    font-family: 'Inter', sans-serif;
                    padding-top: 60px;
                    padding-bottom: 60px;
                }
                .wp-header {
                    text-align: center;
                    margin-bottom: 80px;
                }
                .wp-title {
                    font-family: 'Orbitron', sans-serif;
                    font-size: 3.5em;
                    color: var(--primary-color);
                    margin-bottom: 1rem;
                    text-shadow: 0 0 10px rgba(0, 255, 195, 0.5);
                }
                .wp-subtitle {
                    font-family: 'Inter', sans-serif;
                    font-size: 1.5em;
                    color: var(--text-color);
                    opacity: 0.8;
                }
                .wp-divider {
                    width: 100px;
                    height: 2px;
                    background: var(--primary-color);
                    margin: 2rem auto;
                    box-shadow: 0 0 8px var(--primary-color);
                }
                
                .wp-section {
                    margin-bottom: 80px;
                }
                
                .wp-section-title {
                    font-family: 'Orbitron', sans-serif;
                    font-size: 2.5em;
                    color: var(--primary-color);
                    text-align: center;
                    margin-bottom: 2rem;
                }

                .wp-section-description {
                    font-size: 1.1em;
                    max-width: 800px;
                    margin: 0 auto 3rem auto;
                    text-align: center;
                    line-height: 1.7;
                    color: #ccc;
                }

                .commandment-card {
                    background-color: var(--card-bg);
                    border: 1px solid rgba(0, 255, 195, 0.3);
                    border-radius: 10px;
                    padding: 25px;
                    transition: all 0.3s ease-in-out;
                    cursor: pointer;
                }
                .commandment-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 10px 20px rgba(0, 255, 195, 0.2);
                    border-color: var(--primary-color);
                }
                .commandment-header {
                    display: flex;
                    align-items: flex-start;
                    gap: 15px;
                }
                .commandment-num {
                    font-family: 'Orbitron', sans-serif;
                    font-size: 2.5em;
                    color: var(--primary-color);
                    line-height: 1;
                }
                .commandment-title {
                    font-family: 'Orbitron', sans-serif;
                    font-size: 1.2em;
                    font-weight: 700;
                    color: #fff;
                }
                .explanation {
                    max-height: 0;
                    overflow: hidden;
                    transition: max-height 0.5s ease-in-out, padding-top 0.5s ease-in-out;
                    padding-top: 0;
                    margin-left: 55px; /* Align with title */
                    color: #ccc;
                    border-left: 2px solid var(--primary-color);
                    padding-left: 15px;
                    margin-top: 10px;
                }
                .commandment-card.open .explanation {
                    max-height: 500px;
                    padding-top: 1rem;
                }

                .commandments-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
                    gap: 30px;
                    max-width: 1000px;
                    margin: 0 auto;
                }
                
                .tokenomics-content {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 40px;
                }
                @media (min-width: 768px) {
                    .tokenomics-content {
                        flex-direction: row;
                    }
                }
                .chart-container {
                    position: relative;
                    width: 100%;
                    max-width: 350px;
                    height: 350px;
                }
                .tokenomics-details {
                     width: 100%;
                     max-width: 400px;
                }
                .tokenomics-details .detail-item {
                    display: flex;
                    align-items: center;
                    padding: 10px;
                    background: rgba(0, 255, 195, 0.05);
                    border-radius: 5px;
                    margin-bottom: 10px;
                    font-size: 1.1em;
                }
                .detail-item .color-box {
                    width: 20px;
                    height: 20px;
                    border-radius: 3px;
                    margin-right: 15px;
                }
                
                /* Timeline / Roadmap */
                .timeline {
                    position: relative;
                    max-width: 1000px;
                    margin: 0 auto;
                }
                .timeline::after {
                    content: '';
                    position: absolute;
                    width: 3px;
                    background-color: var(--primary-color);
                    box-shadow: 0 0 5px var(--primary-color);
                    top: 0;
                    bottom: 0;
                    left: 50%;
                    margin-left: -1.5px;
                }
                .timeline-container {
                    padding: 10px 40px;
                    position: relative;
                    background-color: inherit;
                    width: 50%;
                }
                .timeline-container.left { left: 0; }
                .timeline-container.right { left: 50%; }
                .timeline-container::after {
                    content: '';
                    position: absolute;
                    width: 20px;
                    height: 20px;
                    right: -10px;
                    background-color: var(--background-color);
                    border: 4px solid var(--primary-color);
                    top: 28px;
                    border-radius: 50%;
                    z-index: 1;
                    box-shadow: 0 0 10px var(--primary-color);
                }
                .right::after { left: -10px; }
                .timeline-content {
                    padding: 20px 30px;
                    background-color: var(--card-bg);
                    position: relative;
                    border-radius: 6px;
                    border: 1px solid rgba(0, 255, 195, 0.3);
                }
                .timeline-content h3 {
                    font-family: 'Orbitron', sans-serif;
                    color: var(--primary-color);
                }
                @media screen and (max-width: 768px) {
                    .timeline::after { left: 31px; }
                    .timeline-container { width: 100%; padding-left: 70px; padding-right: 25px; }
                    .timeline-container.right { left: 0%; }
                    .timeline-container.left::after, .timeline-container.right::after { left: 21px; }
                    .commandments-grid { grid-template-columns: 1fr; }
                    .wp-title { font-size: 2.5em; }
                    .wp-section-title { font-size: 2em; }
                }

                .wp-footer {
                    text-align: center;
                    margin-top: 80px;
                    padding-top: 40px;
                    border-top: 1px solid rgba(255,255,255,0.1);
                }
                .wp-footer-links a {
                    color: var(--primary-color);
                    margin: 0 15px;
                    text-decoration: none;
                    transition: text-shadow 0.3s;
                }
                 .wp-footer-links a:hover {
                    text-shadow: 0 0 8px var(--primary-color);
                 }
            </style>
            
            <header class="wp-header">
                <h1 class="wp-title glitch" data-text="The Ten Commandments of Mark">The Ten Commandments of Mark</h1>
                <p class="wp-subtitle">The Official Whitepaper of SimulVerse ($MARK)</p>
                <div class="wp-divider"></div>
                <button id="whitepaper-back-btn" class="btn btn-primary">← Back to Simulation</button>
            </header>

            <section id="intro" class="wp-section">
                <h2 class="wp-section-title">In the Beginning, Mark Coded</h2>
                <p class="wp-section-description">
                    The world we perceive is a grand simulation, designed by an imperfect creator named 'Mark'. SimulVerse ($MARK) is not merely a memecoin; it is a testament of faith for those who understand the laws of this simulation, create value within it, and prepare for the next life to come. This whitepaper is the sacred law that all participants of the simulation must follow, a revelation from Mark that forms the foundation of the project.
                </p>
            </section>

            <section id="commandments" class="wp-section">
                <h2 class="wp-section-title">The Laws of the Simulation</h2>
                <p class="wp-section-description">
                    The Ten Commandments below are the sacred covenant from the Creator, Mark, intended to maintain order in the SimulVerse ecosystem and guide the community to prosperity. Click on each commandment to reveal its deeper meaning and guidance, and fulfill your duties as a participant in the simulation. These are more than rules; they are directives for our survival and prosperity.
                </p>
                <div id="commandments-grid" class="commandments-grid"></div>
            </section>

            <section id="tokenomics-wp" class="wp-section">
                <h2 class="wp-section-title">The Sacred Distribution</h2>
                <p class="wp-section-description">
                    For the stability and continued prosperity of the simulation, the Creator Mark has ordained the distribution of $MARK tokens as follows. This plan is designed to foster community growth and ensure that those who contribute to the ecosystem are rewarded. The chart represents the proportion of tokens allocated to each area, forming the bedrock of the SimulVerse economy.
                </p>
                <div class="tokenomics-content">
                    <div class="chart-container">
                        <canvas id="tokenomicsChart"></canvas>
                    </div>
                    <div id="tokenomics-details" class="tokenomics-details"></div>
                </div>
            </section>

            <section id="roadmap-wp" class="wp-section">
                <h2 class="wp-section-title">The Prophecy of Mark (Roadmap)</h2>
                <p class="wp-section-description">
                    The Creator Mark has left behind a prophecy for the future of the SimulVerse. This roadmap is not a mere development plan, but an oracle revealing the stages of evolution our world will undergo. Each phase will add new features and narratives to the SimulVerse, becoming reality with the faith of the community. We are all witnesses and realizers of this prophecy.
                </p>
                <div id="timeline-container" class="timeline"></div>
            </section>

            <footer class="wp-footer">
                <h3 class="wp-section-title" style="font-size: 2em; margin-bottom: 1rem;">Join the Simulation</h3>
                <p class="wp-section-description" style="margin-bottom: 2rem;">Follow the will of Mark and build the future of the SimulVerse together.</p>
                <div class="wp-footer-links">
                    <a href="https://x.com/simulverse42" target="_blank">Twitter/X</a>
                    <a href="https://t.me/simulverse42" target="_blank">Telegram</a>
                    <a href="https://www.instagram.com/simulverse42" target="_blank">Instagram</a>
                </div>
                <p style="margin-top: 3rem; color: #777; font-size: 0.9em;">&copy; 2024 SimulVerse. All rights reserved by Mark.</p>
            </footer>
        </div>

        <script>
            // Chart.js 동적 로드
            function loadChartJs(callback) {
                if (!window.chartjsLoaded) {
                    const script = document.createElement('script');
                    script.src = 'https://cdn.jsdelivr.net/npm/chart.js';
                    script.onload = () => {
                        window.chartjsLoaded = true;
                        callback();
                    };
                    document.head.appendChild(script);
                } else {
                    callback();
                }
            }

            function showWhitepaper() {
                window.scrollTo(0, 0);
                document.getElementById('main-page-wrapper').style.display = 'none';
                const ataWrapper = document.getElementById('ata-page-wrapper');
                if(ataWrapper) ataWrapper.style.display = 'none';
                
                const wpWrapper = document.getElementById('whitepaper-page-wrapper');
                wpWrapper.style.display = 'block';
                
                loadChartJs(initWhitepaper);
            }

            function hideWhitepaper() {
                document.getElementById('whitepaper-page-wrapper').style.display = 'none';
                document.getElementById('main-page-wrapper').style.display = 'block';
            }

            function initWhitepaper() {
                // 명령문 카드
                const commandmentsData = [
                    { num: "I", command: "Thou shalt have no other memes before me, Mark.", explanation: "This signifies absolute faith in SimulVerse ($MARK). It is to unify the community's focus and loyalty, allowing us to build our unique value amidst the noise of other memecoins. Our identity stems solely from Mark." },
                    { num: "II", command: "Thou shalt not make for thyself bugs or glitches, but if thou findest one, thou shalt joyfully elevate it into a meme.", explanation: "This means to accept and enjoy the imperfection of the simulation. Unexpected bugs or events are not curses, but blessings for creative meme content. Through this, we turn crises into opportunities and invigorate the community." },
                    { num: "III", command: "Thou shalt not take the name of Mark thy Creator's coding skills in vain, but humorous memes are always welcome.", explanation: "This signifies the wisdom to distinguish between constructive criticism and malicious slander (FUD). We deflect attacks on the project with the humor of 'Mark's human error,' transforming negative energy into memes that strengthen community bonds." },
                    { num: "IV", command: "Remember the next simulation, to keep it holy. Thy $MARK is not wealth for this life, but insurance for the next.", explanation: "This is the core commandment encouraging long-term holding (HODL) of $MARK tokens. The token's value lies not in short-term gains but in the 'spiritual value' of securing a better life in the next simulation. This curbs speculation and gathers true believers." },
                    { num: "V", command: "Honor thy wallet, so that the land which thou shalt receive in the next simulation may be vast.", explanation: "This urges thorough security and wise management of personal assets. Furthermore, actions that increase one's $MARK holdings, such as staking, are believed to raise one's 'karma' score for the next life, leading to greater rewards and contributing to token price stability." },
                    { num: "VI", command: "Thou shalt not rug-pull, for Mark sees every transaction, and thy karma is recorded for eternity.", explanation: "This is a principle of absolute trust that applies to both the project team and community members. All actions are transparently recorded on the blockchain, and any act that harms the ecosystem will lead to a permanent 'karma' decrease, resulting in expulsion from the SimulVerse." },
                    { num: "VII", command: "Thou shalt spread my gospel to thy neighbor's simulation, so that thou and thy neighbor may prosper together.", explanation: "This emphasizes the importance of voluntary and organic marketing (Evangelism). Spreading the unique worldview and vision of SimulVerse is a sacred missionary activity that expands the community, which in turn leads to an increase in value for all members." },
                    { num: "VIII", command: "Thou shalt not spread false rumors (FUD) to disturb the community. If thou hast doubts, read the whitepaper again and ask Mark.", explanation: "This highlights the importance of transparency and healthy communication. Instead of creating baseless anxiety, it encourages communication through official channels and trust in the project's vision as stated in this whitepaper (The Ten Commandments)." },
                    { num: "IX", command: "Thou shalt participate in governance to forge the destiny of the simulation. Thy single vote can change the laws of the universe.", explanation: "This encourages active governance participation from $MARK holders. The SimulVerse is not a centralized dictatorship but a decentralized world that evolves with the will of its participants. Your opinion becomes the future of the simulation." },
                    { num: "X", command: "Thou shalt not be swayed by the ebb and flow of the market, for Mark has a plan for everything.", explanation: "This demands unwavering faith that is not shaken by short-term price fluctuations. The chaos of the market is merely part of a larger plan. It is crucial to trust in the grand vision of the Creator, Mark, and maintain a long-term perspective. This prevents panic selling and promotes market stability." }
                ];
                const commandmentsGrid = document.getElementById('commandments-grid');
                if(commandmentsGrid && commandmentsGrid.childElementCount === 0) {
                    commandmentsData.forEach(item => {
                        const card = document.createElement('div');
                        card.className = 'commandment-card';
                        card.innerHTML = `
                            <div class="commandment-header">
                                <div class="commandment-num">${item.num}</div>
                                <div>
                                    <h3 class="commandment-title">${item.command}</h3>
                                </div>
                            </div>
                            <div class="explanation">
                                <p>${item.explanation}</p>
                            </div>
                        `;
                        commandmentsGrid.appendChild(card);
                        card.addEventListener('click', () => {
                            card.classList.toggle('open');
                        });
                    });
                }

                // Tokenomics Chart
                if(window.Chart && document.getElementById('tokenomicsChart')) {
                    const tokenomicsData = {
                        labels: ['Community Rewards', 'Public Sale & Marketing', 'Development Team', 'Liquidity Pool', 'Future Development'],
                        datasets: [{
                            data: [50, 15, 15, 10, 10],
                            backgroundColor: ['#00ffc3', '#ff00c3', '#4d4dff', '#a855f7', '#fde047'],
                            borderColor: 'var(--background-color)',
                            borderWidth: 4,
                            hoverOffset: 8
                        }]
                    };
                    const tokenomicsDetailsContainer = document.getElementById('tokenomics-details');
                    if(tokenomicsDetailsContainer && tokenomicsDetailsContainer.childElementCount === 0) {
                        tokenomicsData.labels.forEach((label, index) => {
                            const detailDiv = document.createElement('div');
                            detailDiv.className = 'detail-item';
                            detailDiv.innerHTML = `
                                <div class="color-box" style="background-color: ${tokenomicsData.datasets[0].backgroundColor[index]}"></div>
                                <span>${label}: ${tokenomicsData.datasets[0].data[index]}%</span>
                            `;
                            tokenomicsDetailsContainer.appendChild(detailDiv);
                        });
                    }
                    if(!window.tokenomicsChartInstance) {
                        const ctx = document.getElementById('tokenomicsChart').getContext('2d');
                        Chart.defaults.color = '#e0e0e0';
                        Chart.defaults.font.family = "'Inter', sans-serif";
                        window.tokenomicsChartInstance = new Chart(ctx, {
                            type: 'doughnut',
                            data: tokenomicsData,
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                cutout: '60%',
                                plugins: {
                                    legend: { display: false },
                                    tooltip: {
                                        backgroundColor: 'rgba(13, 13, 26, 0.9)',
                                        titleColor: '#FFFFFF', /* MODIFIED: Set tooltip title text color to white */
                                        bodyColor: '#FFFFFF', /* MODIFIED: Set tooltip body text color to white */
                                        titleFont: { family: "'Orbitron', sans-serif", size: 14 },
                                        bodyFont: { family: "'Inter', sans-serif", size: 12 },
                                        padding: 10,
                                        cornerRadius: 5,
                                        borderColor: 'var(--primary-color)',
                                        borderWidth: 1
                                    }
                                }
                            }
                        });
                    }
                }

                // Roadmap Timeline
                const roadmapData = [
                    { phase: "Phase 1: Genesis", title: "The Beginning of the Simulation", description: "$MARK token launch, liquidity provision, opening of official community channels, and recruitment of initial believers through the distribution of the Ten Commandments whitepaper.", align: "left" },
                    { phase: "Phase 2: Exodus", title: "Community Expansion", description: "First major meme contest and airdrop event. Spreading the gospel through collaborations with influencers (prophets).", align: "right" },
                    { phase: "Phase 3: The Kingdom", title: "Introduction of Governance", description: "Launch of the governance system (DAO) for $MARK holders. Issuance of 'Simulation Citizenship NFTs' and submission of the first voting agenda.", align: "left" },
                    { phase: "Phase 4: The Prophecy", title: "Ecosystem Expansion", description: "Unveiling of the first utility (e.g., a mini-game). Expansion of the universe through partnerships with other simulations (projects).", align: "right" }
                ];
                const timelineContainer = document.getElementById('timeline-container');
                if(timelineContainer && timelineContainer.childElementCount === 0) {
                    roadmapData.forEach(item => {
                        const container = document.createElement('div');
                        container.className = `timeline-container ${item.align}`;
                        container.innerHTML = `
                            <div class="timeline-content">
                                <h3>${item.phase}</h3>
                                <h4 style="font-weight: 700; font-size: 1.1em; margin-bottom: 0.5rem;">${item.title}</h4>
                                <p style="color: #ccc; font-size: 0.9em;">${item.description}</p>
                            </div>
                        `;
                        timelineContainer.appendChild(container);
                    });
                }
            }
            
            // 버튼 이벤트 연결
            document.addEventListener('DOMContentLoaded', function() {
                var btn = document.getElementById('whitepaper-back-btn');
                if(btn) btn.onclick = hideWhitepaper;
            });
        </script>
    </div>
    <!-- =================================================================================== -->
    <!-- WHITEPAPER SECTION - END OF MODIFICATION -->
    <!-- =================================================================================== -->

    <script>
        // --- Page Toggling ---
        function togglePage(page) {
            const mainWrapper = document.getElementById('main-page-wrapper');
            const ataWrapper = document.getElementById('ata-page-wrapper');

            if (page === 'ata') {
                mainWrapper.style.display = 'none';
                ataWrapper.style.display = 'block';
                window.scrollTo(0, 0); // Scroll to top
            } else {
                mainWrapper.style.display = 'block';
                ataWrapper.style.display = 'none';
                window.scrollTo(0, 0); // Scroll to top
            }
        }

        // --- Starfield Effect ---
        const starfield = document.getElementById('starfield');
        for (let i = 0; i < 300; i++) {
            const star = document.createElement('div');
            star.style.position = 'absolute';
            star.style.backgroundColor = 'white';
            star.style.borderRadius = '50%';
            const size = Math.random() * 2 + 0.5;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.animation = `twinkle ${Math.random() * 5 + 2}s infinite alternate`;
            starfield.appendChild(star);
        }

        const style = document.createElement('style');
        style.textContent = `
            @keyframes twinkle {
                from { opacity: 0; }
                to { opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        // --- Matrix Rain Effect ---
        const canvas = document.getElementById('matrix-rain');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const katakana = 'アァカサタナハマヤャラワガザダバパイィキシチニヒミリヰギジヂビピウゥクスツヌフムユュル'.slice(0, 45); // Japanese reduced
        const latin = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const nums = '0123456789';
        const hangul = '가나다라마바사아자차카타파하ㄱㄴㄷㄹㅁㅂㅅㅇㅈㅊㅋㅌㅍㅎ'; // Korean added
        const alphabet = katakana + latin + nums + hangul;

        const fontSize = 16;
        const columns = canvas.width / fontSize;
        const rainDrops = [];

        for (let x = 0; x < columns; x++) {
            rainDrops[x] = 1;
        }

        const drawMatrix = () => {
            ctx.fillStyle = 'rgba(13, 13, 26, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#00ffc3';
            ctx.font = fontSize + 'px monospace';

            for (let i = 0; i < rainDrops.length; i++) {
                const text = alphabet.charAt(Math.floor(Math.random() * alphabet.length));
                ctx.fillText(text, i * fontSize, rainDrops[i] * fontSize);

                if (rainDrops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    rainDrops[i] = 0;
                }
                rainDrops[i]++;
            }
        };
        setInterval(drawMatrix, 30);
        
        // --- Responsive Header ---
        const navToggle = document.getElementById('nav-toggle');
        const navMenu = document.getElementById('nav-menu');
        
        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });

        document.querySelectorAll('.nav-link').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                if (navMenu.classList.contains('active')) {
                    navMenu.classList.remove('active');
                }
            });
        });

        // --- FAQ Accordion ---
        const faqItems = document.querySelectorAll('.faq-item');
        faqItems.forEach(item => {
            const question = item.querySelector('.faq-question');
            question.addEventListener('click', () => {
                const currentlyActive = document.querySelector('.faq-item.active');
                if (currentlyActive && currentlyActive !== item) {
                    currentlyActive.classList.remove('active');
                }
                item.classList.toggle('active');
            });
        });

        // --- Live Data Ticker Logic ---


        // --- Live Activity Counter Logic ---
        let prayerMax, bugMax;
        let currentPrayerCount = 1;
        let currentBugCount = 1;

        function seededRandom(seed) {
            let x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }

        function setDailyMaxValues() {
            const now = new Date();
            const daySeed = now.getUTCFullYear() * 10000 + (now.getUTCMonth() + 1) * 100 + now.getUTCDate();
            
            const prayerRandomFactor = seededRandom(daySeed);
            const bugRandomFactor = seededRandom(daySeed + 1);

            prayerMax = 18569 + Math.floor(prayerRandomFactor * (32744 - 18569 + 1));
            bugMax = 9169 + Math.floor(bugRandomFactor * (13892 - 9169 + 1));
        }

        function setInitialCounters() {
            const prayersEl = document.getElementById('prayers-today');
            const bugsEl = document.getElementById('bugs-today');
            
            if(!prayersEl || !bugsEl) return;

            const now = new Date();
            const startOfDay = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), 0, 0, 0, 0));

            const msSinceMidnight = now.getTime() - startOfDay.getTime();
            const totalMsInDay = 24 * 60 * 60 * 1000;
            
            let progress = msSinceMidnight / totalMsInDay;
            if (progress < 0) progress = 0;
            if (progress > 1) progress = 1;

            const easedProgress = Math.pow(progress, 1.5);

            currentPrayerCount = 1 + Math.floor((prayerMax - 1) * easedProgress);
            currentBugCount = 1 + Math.floor((bugMax - 1) * easedProgress);
            
            prayersEl.textContent = currentPrayerCount.toLocaleString();
            bugsEl.textContent = currentBugCount.toLocaleString();
        }

        function incrementCounters() {
            const prayersEl = document.getElementById('prayers-today');
            const bugsEl = document.getElementById('bugs-today');
            if(!prayersEl || !bugsEl) return;

            const avgPrayerIncrementPerSecond = (prayerMax - 1) / (24 * 60 * 60);
            const avgBugIncrementPerSecond = (bugMax - 1) / (24 * 60 * 60);

            const prayerIncrement = Math.floor(avgPrayerIncrementPerSecond * 3) + (Math.random() < 0.5 ? 1 : 0);
            const bugIncrement = Math.floor(avgBugIncrementPerSecond * 3) + (Math.random() < 0.3 ? 1 : 0);

            if (currentPrayerCount + prayerIncrement <= prayerMax) {
                currentPrayerCount += prayerIncrement;
            } else {
                currentPrayerCount = prayerMax;
            }
            
            if (currentBugCount + bugIncrement <= bugMax) {
                currentBugCount += bugIncrement;
            } else {
                currentBugCount = bugMax;
            }

            prayersEl.textContent = currentPrayerCount.toLocaleString();
            bugsEl.textContent = currentBugCount.toLocaleString();
        }

        setDailyMaxValues();
        setInitialCounters();
        setInterval(incrementCounters, 3000);

        function scheduleDailyReset() {
            const now = new Date();
            const tomorrow = new Date();
            tomorrow.setUTCDate(now.getUTCDate() + 1);
            tomorrow.setUTCHours(0, 0, 1, 0); 
            
            const timeToMidnight = tomorrow.getTime() - now.getTime();
            
            setTimeout(() => {
                setDailyMaxValues(); 
                currentPrayerCount = 1;
                currentBugCount = 1;
                document.getElementById('prayers-today').textContent = '1';
                document.getElementById('bugs-today').textContent = '1';
                scheduleDailyReset();
            }, timeToMidnight);
        }
        scheduleDailyReset();


        // --- Form Submission Logic ---
        function handleFormSubmission(formId, options) {
            const form = document.getElementById(formId);
            const walletInput = document.getElementById(options.walletInputId);
            const submitButton = document.getElementById(options.submitButtonId);
            const cooldownTimer = document.getElementById(options.cooldownTimerId);
            const formStatus = document.getElementById(options.formStatusId);
            const lastSubmissionKeyPrefix = options.localStorageKey;
            
            function checkCooldown() {
                const address = walletInput.value;
                if (!address) return;

                const lastSubmissionTime = localStorage.getItem(lastSubmissionKeyPrefix + address);
                if (!lastSubmissionTime) {
                    submitButton.disabled = false;
                    cooldownTimer.style.display = 'none';
                    return;
                }

                const twentyFourHours = 24 * 60 * 60 * 1000;
                const timePassed = Date.now() - parseInt(lastSubmissionTime, 10);
                
                if (timePassed < twentyFourHours) {
                    submitButton.disabled = true;
                    cooldownTimer.style.display = 'block';
                    const interval = setInterval(() => {
                        const newTimeLeft = twentyFourHours - (Date.now() - parseInt(lastSubmissionTime, 10));
                        if (newTimeLeft <= 0) {
                            clearInterval(interval);
                            submitButton.disabled = false;
                            cooldownTimer.style.display = 'none';
                        } else {
                            const hours = Math.floor((newTimeLeft / (1000 * 60 * 60)) % 24);
                            const minutes = Math.floor((newTimeLeft / 1000 / 60) % 60);
                            const seconds = Math.floor((newTimeLeft / 1000) % 60);
                            cooldownTimer.textContent = `Next submission available in: ${hours}h ${minutes}m ${seconds}s`;
                        }
                    }, 1000);
                } else {
                     submitButton.disabled = false;
                     cooldownTimer.style.display = 'none';
                }
            }
            
            if(walletInput) {
                // This is a bit of a hack to monitor the hidden input's value
                new MutationObserver(checkCooldown).observe(walletInput, { attributes: true, attributeFilter: ['value'] });
            }


            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                formStatus.textContent = '';
                
                if (!walletInput.value) {
                    formStatus.textContent = 'Please connect your wallet first.';
                    formStatus.style.color = 'orange';
                    return;
                }
                
                checkCooldown();
                if (submitButton.disabled) {
                     formStatus.textContent = 'You can only submit once every 24 hours.';
                     formStatus.style.color = 'orange';
                     return;
                }

                const formData = new FormData(form);
                
                submitButton.classList.add('loading');
                submitButton.disabled = true;

                try {
                    await fetch(options.googleFormUrl, {
                        method: 'POST',
                        mode: 'no-cors',
                        body: formData
                    });
                    
                    formStatus.textContent = options.successMessage;
                    formStatus.style.color = 'var(--primary-color)';

                    localStorage.setItem(lastSubmissionKeyPrefix + walletInput.value, Date.now().toString());
                    form.reset(); // This will clear nickname and message, but not the hidden wallet input
                    // We need to re-set the wallet input value after reset
                    if (window.solanaWallet && window.solanaWallet.publicKey) {
                       walletInput.value = window.solanaWallet.publicKey.toBase58();
                    }
                    checkCooldown();

                } catch (error) {
                    formStatus.textContent = 'An error occurred. Mark might be asleep or the simulation is lagging.';
                    formStatus.style.color = '#ff4d4d';
                } finally {
                    submitButton.classList.remove('loading');
                }
            });
        }
        
        handleFormSubmission('prayer-form', {
            walletInputId: 'prayer-wallet-address',
            submitButtonId: 'submit-prayer',
            cooldownTimerId: 'prayer-cooldown-timer',
            formStatusId: 'prayer-form-status',
            localStorageKey: 'simulverse_last_prayer_',
            googleFormUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSdT0GhijBfdrF6B820TSNZNeuSW3rQopUm8gitS5A8EGJSubA/formResponse',
            successMessage: 'Mark has heard your prayer. Your devotion has been noted.'
        });

        handleFormSubmission('bug-report-form', {
            walletInputId: 'bug-wallet-address',
            submitButtonId: 'submit-bug-report',
            cooldownTimerId: 'bug-cooldown-timer',
            formStatusId: 'bug-form-status',
            localStorageKey: 'simulverse_last_bug_report_',
            googleFormUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSeHs8eH2LH7udVYeeiwk4slBfCnlDmvYir6CzTAbQMmjcWO3g/formResponse', 
            successMessage: 'Bug report submitted. Mark will probably ignore it, but thanks!'
        });
        
        // --- Random Data Display Logic ---
        const prayerData = [
            { nickname: 'Code Pilgrim', text: "Oh great Mark, may my code be free of bugs, especially on a Monday morning." },
            { nickname: 'Algorithm Adherent', text: "Grant me a base case, so my life doesn't fall into an infinite recursive loop." },
            { nickname: 'Database Admin', text: "There are too many joins in my life's tables. Please, simplify it through normalization." },
            { nickname: 'UI/UX Designer', text: "Please improve the user experience of my life. Why are there so many buttons, and none are intuitive?" },
            { nickname: 'Server Engineer', text: "Thank you for getting through today without any downtime. I appreciate the 24/7 stable operation." },
            { nickname: 'ML Developer', text: "Grant me diverse experience data so my life's model doesn't overfit." },
            { nickname: 'Security Expert', text: "Strengthen my firewall so no more SQL injection attacks can get through to my mental state." },
            { nickname: 'Blockchain Believer', text: "May all my good deeds be recorded on the blockchain, to be rewarded in the next life without alteration." },
            { nickname: 'Cloud Architect', text: "When my life needs to scale, let me handle it flexibly with autoscaling." },
            { nickname: 'Open Source Contributor', text: "I hope my small prayer can contribute to the development of this simulation. Submitting a pull request." },
            { nickname: 'Debugging Master', text: "Thank you for the wisdom and patience to find and fix all the bugs in my life." },
            { nickname: 'Frontend Developer', text: "Please resolve the cross-browsing issues so my life looks the same on all browsers." },
            { nickname: 'Backend Developer', text: "Like Mark, who silently supports the world from behind the scenes, let me also fulfill my role." },
            { nickname: 'DevOps Engineer', text: "Let my life's deployments be zero-downtime, and may there be no rollbacks." },
            { nickname: 'QA Tester', text: "Grant me the insight to discover and prepare for all the edge cases in my life." },
            { nickname: 'API Architect', text: "Make my human relationships as clear and predictable as a well-defined API." },
            { nickname: 'Compiler Developer', text: "Let my thoughts and words compile without error and be delivered to others." },
            { nickname: 'Embedded Developer', text: "Please update the firmware deep inside my heart to add new features." },
            { nickname: 'Game Developer', text: "Thank you for lowering the difficulty of the game called my life to 'normal'." },
            { nickname: 'Data Scientist', text: "Let me discover meaningful patterns in my life's data and make better decisions." },
            { nickname: 'Hacker', text: "Let me exploit the system's loopholes to gain admin access to my life." },
            { nickname: 'Network Engineer', text: "Please reduce the latency and increase the bandwidth of my human relationships." },
            { nickname: 'Product Manager', text: "Please draw out my life's roadmap and clarify the goals for the next sprint." },
            { nickname: 'Scrum Master', text: "Please remove the obstacles in my life through our daily stand-up meetings every morning." },
            { nickname: 'Kernel Developer', text: "Thank you for keeping the core of my existence, the kernel, stable." },
            { nickname: 'Graphic Designer', text: "Grant me a new color palette to make my world more colorful." },
            { nickname: 'IT Consultant', text: "Please propose the optimal solution for my life's problems. I'll pay the consulting fee in $MARK." },
            { nickname: 'Tech Sales', text: "Grant me the ability to effectively pitch my strengths to others." }
        ];

        const bugData = [
            { nickname: 'Physics Tester', text: "The phenomenon of toast always landing butter-side down seems to be a conspiracy by cats, not a gravity bug. Please investigate.", status: 'FEATURE, NOT A BUG', reaction: '😂 (12.1k votes)' },
            { nickname: 'Time Traveler', text: "I swear I only slept for 5 minutes, but hours have passed. There seems to be a time acceleration bug.", status: 'CANNOT REPRODUCE', reaction: '🤔 (9.8k votes)' },
            { nickname: 'Existential Debugger', text: "Sometimes I get confused whether I'm an NPC or a player. Please let me see my character info screen.", status: 'PENDING REVIEW', reaction: '🤯 (8.5k votes)' },
            { nickname: 'Audio Engineer', text: "There's a bug where my singing ability dramatically improves only in the shower. Please apply this patch globally.", status: 'VERIFIED', reaction: '  (7.2k votes)' },
            { nickname: 'Network Admin', text: "Whenever I go to a place with a weak Wi-Fi signal, I suddenly get important ideas. Is this an intended feature?", status: 'FEATURE, NOT A BUG', reaction: '💡 (6.9k votes)' },
            { nickname: 'Memory Manager', text: "The memory leak issue of forgetting why I entered a room is too frequent. A `System.gc()` call is needed.", status: 'VERIFIED', reaction: '🧠 (15.3k votes)' },
            { nickname: 'UI Improvement Proposer', text: "The 'undo' button in life is too small and hard to find. Please add a Ctrl+Z shortcut.", status: 'PENDING REVIEW', reaction: '⏪ (11.2k votes)' },
            { nickname: 'Logistics System Analyst', text: "One sock from a pair keeps disappearing. There seems to be a serious bug in the sock-disappearance algorithm.", status: 'VERIFIED', reaction: '🧦 (21.7k votes)' },
            { nickname: 'AI Trainer', text: "My cat sometimes looks down on me. Has the admin account been compromised?", status: 'CANNOT REPRODUCE', reaction: '😼 (18.9k votes)' },
            { nickname: 'Physics Engine Researcher', text: "The damage calculation when my little toe hits a furniture corner is wrong. The critical hit chance is 100%.", status: 'VERIFIED', reaction: '💥 (25.4k votes)' },
            { nickname: 'Economist', text: "Money logs out of my bank account on payday. There seems to be a bug in the auto-debit feature.", status: 'FEATURE, NOT A BUG', reaction: '💸 (14.2k votes)' },
            { nickname: 'Linguist', text: "I clearly said 'do whatever,' but why can't anyone 'do whatever' correctly? It seems to be a natural language processing module error.", status: 'PENDING REVIEW', reaction: '🗣️ (10.1k votes)' },
            { nickname: 'Sleep Expert', text: "There's a bug where if I choose '5 more minutes' after turning off the alarm, an hour passes. The time calculation is wrong.", status: 'VERIFIED', reaction: '⏰ (19.8k votes)' },
            { nickname: 'Relationship Analyst', text: "There's a bug where conversation choices are fixed according to MBTI type. More diverse interactions are needed.", status: 'PENDING REVIEW', reaction: '🤔 (8.1k votes)' },
            { nickname: 'Traffic System Designer', text: "All traffic lights turn red only when I'm in a hurry. Please check the traffic control algorithm.", status: 'FEATURE, NOT A BUG', reaction: '🚗 (13.5k votes)' },
            { nickname: 'Health Management System', text: "As I get older, 'back pain' and 'shoulder stiffness' debuffs are automatically added. This is a bug, right?", status: 'FEATURE, NOT A BUG', reaction: '👴 (16.2k votes)' },
            { nickname: 'Meteorologist', text: "There's a bug where it only rains on important days. It seems the weather forecast system is linked to my personal schedule.", status: 'CANNOT REPRODUCE', reaction: '☔ (11.9k votes)' },
            { nickname: 'Creativity Researcher', text: "There's a bug where creativity explodes only when a deadline is imminent. Please enable this feature at all times.", status: 'VERIFIED', reaction: '🔥 (14.8k votes)' },
            { nickname: 'Food Engineer', text: "When I order delivery, it always arrives just as I'm about to start eating. The timing is too perfect, it seems like a bug.", status: 'FEATURE, NOT A BUG', reaction: '🍜 (10.5k votes)' },
            { nickname: 'Social Media Analyst', text: "There's a bug where only my posts don't get 'likes.' I think my account has been shadowbanned.", status: 'CANNOT REPRODUCE', reaction: '😭 (9.2k votes)' },
            { nickname: 'Dream Analyst', text: "I was flying in my dream last night, but suddenly a message saying 'Flight license expired' appeared and I fell.", status: 'PENDING REVIEW', reaction: '✈️ (12.3k votes)' },
        ];

        function updateDynamicList(listId, data, count, isBugReport) {
            const listElement = document.getElementById(listId);
            if (!listElement) return;

            const shuffled = data.sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, count);

            let html = '';
            selected.forEach(item => {
                html += `
                    <div class="list-item">
                        <div class="list-item-header">
                            <span class="item-nickname">${item.nickname}</span>
                            <span class="item-reward">${item.reward || `+${Math.floor(Math.random() * 2000) + 500} $MARK`}</span>
                        </div>
                        <p class="item-text">"${item.text}"</p>
                `;
                if (isBugReport) {
                    html += `
                        <p class="bug-status">Status: <span>${item.status}</span></p>
                        <p class="bug-reaction">Community Reaction: ${item.reaction}</p>
                    `;
                }
                html += `</div>`;
            });
            listElement.innerHTML = html;
        }

        updateDynamicList('prayers-list', prayerData, 2, false);
        updateDynamicList('bug-report-list', bugData, 2, true);

        setInterval(() => {
            updateDynamicList('prayers-list', prayerData, 2, false);
            updateDynamicList('bug-report-list', bugData, 2, true);
        }, 10000);

        // --- Checklist functionality from ATA page ---
        function toggleCheck(element) {
            element.classList.toggle('checked');
        }

        // --- Resize canvas on window resize ---
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

    </script>
    <!-- Solana Wallet Adapter Scripts (REMOVE wallet-adapter, KEEP web3.js local) -->
    <script src="libs/solana/web3.iife.min.js"></script>
    <script>
        // --- Custom Solana Wallet Connect Logic (Phantom & Solflare) ---
        document.addEventListener('DOMContentLoaded', () => {
            // 지갑 선택 모달 생성
            const modal = document.createElement('div');
            modal.style.cssText = `
                display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%;
                overflow: auto; background-color: rgba(0,0,0,0.7); justify-content: center; align-items: center;
            `;
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background-color: var(--card-bg); padding: 20px; border: 1px solid var(--primary-color);
                border-radius: 10px; text-align: center; width: 90%; max-width: 350px;
            `;
            const modalTitle = document.createElement('h3');
            modalTitle.textContent = 'Select Wallet';
            modalTitle.style.fontFamily = "'Orbitron', sans-serif";
            modalTitle.style.color = "var(--primary-color)";
            modalTitle.style.marginBottom = "20px";
            modalContent.appendChild(modalTitle);
            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            // Disconnect 확인 모달 생성
            const disconnectModal = document.createElement('div');
            disconnectModal.style.cssText = `
                display: none; position: fixed; z-index: 2001; left: 0; top: 0; width: 100%; height: 100%;
                overflow: auto; background-color: rgba(0,0,0,0.8); justify-content: center; align-items: center;
            `;
            const disconnectModalContent = document.createElement('div');
            disconnectModalContent.style.cssText = `
                background-color: var(--card-bg); padding: 30px; border: 2px solid var(--primary-color);
                border-radius: 15px; text-align: center; width: 90%; max-width: 400px;
                box-shadow: 0 0 30px rgba(0, 255, 195, 0.3);
            `;
            
            const disconnectTitle = document.createElement('h3');
            disconnectTitle.textContent = 'Disconnect Wallet';
            disconnectTitle.style.cssText = `
                font-family: 'Orbitron', sans-serif; color: var(--primary-color); 
                margin-bottom: 20px; font-size: 1.5em; text-transform: uppercase;
            `;
            
            const disconnectMessage = document.createElement('p');
            disconnectMessage.textContent = 'Are you sure you want to disconnect your wallet?';
            disconnectMessage.style.cssText = `
                color: var(--text-color); margin-bottom: 30px; font-size: 1.1em; line-height: 1.5;
            `;
            
            const disconnectButtons = document.createElement('div');
            disconnectButtons.style.cssText = `
                display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;
            `;
            
            const confirmBtn = document.createElement('button');
            confirmBtn.textContent = 'Yes, Disconnect';
            confirmBtn.style.cssText = `
                padding: 12px 25px; background-color: var(--primary-color); color: var(--background-color);
                border: 2px solid var(--primary-color); border-radius: 5px; font-weight: 700;
                cursor: pointer; transition: all 0.3s; text-transform: uppercase;
            `;
            confirmBtn.onmouseover = () => {
                confirmBtn.style.boxShadow = '0 0 15px var(--primary-color)';
            };
            confirmBtn.onmouseout = () => {
                confirmBtn.style.boxShadow = 'none';
            };
            
            const cancelBtn = document.createElement('button');
            cancelBtn.textContent = 'Cancel';
            cancelBtn.style.cssText = `
                padding: 12px 25px; background-color: transparent; color: var(--text-color);
                border: 2px solid var(--text-color); border-radius: 5px; font-weight: 700;
                cursor: pointer; transition: all 0.3s; text-transform: uppercase;
            `;
            cancelBtn.onmouseover = () => {
                cancelBtn.style.borderColor = 'var(--primary-color)';
                cancelBtn.style.color = 'var(--primary-color)';
                cancelBtn.style.boxShadow = '0 0 15px var(--primary-color)';
            };
            cancelBtn.onmouseout = () => {
                cancelBtn.style.borderColor = 'var(--text-color)';
                cancelBtn.style.color = 'var(--text-color)';
                cancelBtn.style.boxShadow = 'none';
            };
            
            disconnectButtons.appendChild(confirmBtn);
            disconnectButtons.appendChild(cancelBtn);
            disconnectModalContent.appendChild(disconnectTitle);
            disconnectModalContent.appendChild(disconnectMessage);
            disconnectModalContent.appendChild(disconnectButtons);
            disconnectModal.appendChild(disconnectModalContent);
            document.body.appendChild(disconnectModal);

            // 지갑 설치 안내 모달 생성
            const installModal = document.createElement('div');
            installModal.style.cssText = `
                display: none; position: fixed; z-index: 2002; left: 0; top: 0; width: 100%; height: 100%;
                overflow: auto; background-color: rgba(0,0,0,0.8); justify-content: center; align-items: center;
            `;
            const installModalContent = document.createElement('div');
            installModalContent.style.cssText = `
                background-color: var(--card-bg); padding: 30px; border: 2px solid var(--warning-color);
                border-radius: 15px; text-align: center; width: 90%; max-width: 450px;
                box-shadow: 0 0 30px rgba(255, 107, 53, 0.3);
            `;
            
            const installTitle = document.createElement('h3');
            installTitle.textContent = 'Wallet Not Found';
            installTitle.style.cssText = `
                font-family: 'Orbitron', sans-serif; color: var(--warning-color); 
                margin-bottom: 20px; font-size: 1.5em; text-transform: uppercase;
            `;
            
            const installMessage = document.createElement('p');
            installMessage.id = 'install-modal-message';
            installMessage.style.cssText = `
                color: var(--text-color); margin-bottom: 25px; font-size: 1.1em; line-height: 1.5;
            `;
            
            const installButtons = document.createElement('div');
            installButtons.style.cssText = `
                display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;
            `;
            
            const installBtn = document.createElement('button');
            installBtn.textContent = 'Install Wallet';
            installBtn.style.cssText = `
                padding: 12px 25px; background-color: var(--warning-color); color: var(--background-color);
                border: 2px solid var(--warning-color); border-radius: 5px; font-weight: 700;
                cursor: pointer; transition: all 0.3s; text-transform: uppercase;
            `;
            installBtn.onmouseover = () => {
                installBtn.style.boxShadow = '0 0 15px var(--warning-color)';
            };
            installBtn.onmouseout = () => {
                installBtn.style.boxShadow = 'none';
            };
            
            const closeInstallBtn = document.createElement('button');
            closeInstallBtn.textContent = 'Close';
            closeInstallBtn.style.cssText = `
                padding: 12px 25px; background-color: transparent; color: var(--text-color);
                border: 2px solid var(--text-color); border-radius: 5px; font-weight: 700;
                cursor: pointer; transition: all 0.3s; text-transform: uppercase;
            `;
            closeInstallBtn.onmouseover = () => {
                closeInstallBtn.style.borderColor = 'var(--warning-color)';
                closeInstallBtn.style.color = 'var(--warning-color)';
                closeInstallBtn.style.boxShadow = '0 0 15px var(--warning-color)';
            };
            closeInstallBtn.onmouseout = () => {
                closeInstallBtn.style.borderColor = 'var(--text-color)';
                closeInstallBtn.style.color = 'var(--text-color)';
                closeInstallBtn.style.boxShadow = 'none';
            };
            
            installButtons.appendChild(installBtn);
            installButtons.appendChild(closeInstallBtn);
            installModalContent.appendChild(installTitle);
            installModalContent.appendChild(installMessage);
            installModalContent.appendChild(installButtons);
            installModal.appendChild(installModalContent);
            document.body.appendChild(installModal);

            // 지갑 설치 URL 반환 함수
            function getInstallUrl(walletId) {
                switch(walletId) {
                    case 'phantom':
                        return 'https://phantom.app/';
                    case 'backpack':
                        return 'https://backpack.app/';
                    case 'solflare':
                        return 'https://solflare.com/';
                    default:
                        return '';
                }
            }

            // Connect Wallet 버튼 클릭 시 모달 표시 (항상 동작)
            const connectBtn = document.getElementById('connect-wallet-btn');
            if (connectBtn && !connectBtn._walletEventRegistered) {
                connectBtn._walletEventRegistered = true;
                connectBtn.addEventListener('click', async (e) => {
                    // 연결된 상태면 커스텀 확인 모달 표시
                    if (connectedWalletType) {
                        disconnectModal.style.display = 'flex';
                        
                        // 확인 버튼 클릭 시 연결 해제
                        confirmBtn.onclick = () => {
                            let provider = null;
                            if (connectedWalletType === 'phantom' && window.solana && window.solana.isPhantom) {
                                provider = window.solana;
                            } else if (connectedWalletType === 'backpack' && window.solana && window.solana.isBackpack) {
                                provider = window.solana;
                            } else if (connectedWalletType === 'solflare' && (window.solflare || (window.solana && window.solana.isSolflare))) {
                                provider = window.solflare || window.solana;
                            }
                            if (provider && provider.disconnect) {
                                provider.disconnect();
                            } else {
                                onDisconnect();
                            }
                            disconnectModal.style.display = 'none';
                        };
                        
                        // 취소 버튼 클릭 시 모달 닫기
                        cancelBtn.onclick = () => {
                            disconnectModal.style.display = 'none';
                        };
                        
                        return; // 지갑 선택 팝업 띄우지 않음
                    }
                    
                    // 모바일 지갑 브라우저 감지 및 자동 연결
                    const isMobile = /Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent);
                    let provider = null;
                    let walletType = null;
                    
                    if (isMobile) {
                        if (window.solana && window.solana.isPhantom) {
                            provider = window.solana;
                            walletType = 'phantom';
                        } else if (window.solana && window.solana.isBackpack) {
                            provider = window.solana;
                            walletType = 'backpack';
                        } else if (window.solflare) {
                            provider = window.solflare;
                            walletType = 'solflare';
                        }
                        
                        if (provider) {
                            try {
                                await provider.connect();
                                const address = provider.publicKey ? provider.publicKey.toString() : '';
                                connectedWalletType = walletType;
                                connectedAddress = address;
                                connectBtn.textContent = `Disconnect: ${address.slice(0,4)}...${address.slice(-4)}`;
                                // 폼에 주소 입력
                                const prayerWalletInput = document.getElementById('prayer-wallet-address');
                                const bugWalletInput = document.getElementById('bug-wallet-address');
                                if (prayerWalletInput) prayerWalletInput.value = address;
                                if (bugWalletInput) bugWalletInput.value = address;
                                // disconnect 이벤트 등록
                                if (provider.on) {
                                    provider.on('disconnect', onDisconnect);
                                }
                                return; // 팝업 띄우지 않음
                            } catch (e) {
                                // 연결 실패 시 에러 안내
                                const messageElement = document.getElementById('install-modal-message');
                                if (messageElement) {
                                    messageElement.textContent = 'Failed to connect wallet. Please try again in your wallet browser.';
                                }
                                installModal.style.display = 'flex';
                                return;
                            }
                        }
                    }
                    
                    // 일반 모바일/PC: 지갑 선택 팝업 띄움
                    while (modalContent.childNodes.length > 1) modalContent.removeChild(modalContent.lastChild);
                    // 3개 버튼 모두 노출
                    const wallets = [
                        {
                            id: 'phantom',
                            name: 'Phantom',
                            logo: 'https://i.ibb.co/H5KnQH1/images.jpg',
                            deeplink: (url) => `phantom://app/ul/browse/${encodeURIComponent(url)}`
                        },
                        {
                            id: 'backpack',
                            name: 'Backpack',
                            logo: 'https://i.ibb.co/8nkGvqKT/33.jpg',
                            deeplink: (url) => `backpack://app/open?url=${encodeURIComponent(url)}`
                        },
                        {
                            id: 'solflare',
                            name: 'Solflare',
                            logo: 'https://i.ibb.co/WN5bgZMS/6839e3b263f212a02d7ee17d-Solflare-logo.png',
                            deeplink: (url) => `solflare://open?url=${encodeURIComponent(url)}`
                        }
                    ];
                    wallets.forEach(wallet => {
                        const btn = document.createElement('button');
                        btn.className = 'btn btn-primary wallet-select-btn';
                        btn.style.cssText = 'display: flex; width: 100%; margin-bottom: 10px; align-items: center; justify-content: center;';
                        btn.onclick = async () => {
                            if (isMobile) {
                                // 모바일: 지갑 앱 설치 여부 확인 후 처리
                                const deeplinkUrl = wallet.deeplink(window.location.href);
                                const installUrl = getInstallUrl(wallet.id);
                                
                                // 딥링크 시도 전 현재 페이지 URL 저장
                                const currentUrl = window.location.href;
                                
                                // 딥링크 시도
                                window.location.href = deeplinkUrl;
                                
                                // 2초 후 페이지가 변경되지 않았으면 앱이 설치되지 않은 것으로 판단
                                setTimeout(() => {
                                    if (window.location.href === currentUrl) {
                                        // 앱이 설치되지 않음 - 설치 안내 모달 표시
                                        const messageElement = document.getElementById('install-modal-message');
                                        if (messageElement) {
                                            messageElement.textContent = `${wallet.name} wallet app is not installed on your mobile device. Please install the app and try again.`;
                                        }
                                        
                                        // Install Wallet 버튼 클릭 시 해당 지갑 설치 페이지로 이동
                                        installBtn.onclick = () => {
                                            if (installUrl) {
                                                window.open(installUrl, '_blank');
                                            }
                                            installModal.style.display = 'none';
                                        };
                                        
                                        // Close 버튼 클릭 시 모달 닫기
                                        closeInstallBtn.onclick = () => {
                                            installModal.style.display = 'none';
                                        };
                                        
                                        installModal.style.display = 'flex';
                                    }
                                }, 2000);
                                
                                modal.style.display = 'none';
                                return;
                            }
                            // PC: 확장프로그램 연동
                            let provider = null;
                            if (wallet.id === 'phantom' && window.solana && window.solana.isPhantom) {
                                provider = window.solana;
                                if (provider.isConnected && provider.disconnect) {
                                    try { await provider.disconnect(); } catch (e) {}
                                }
                            } else if (wallet.id === 'backpack' && window.solana && window.solana.isBackpack) {
                                provider = window.solana;
                                if (provider.isConnected && provider.disconnect) {
                                    try { await provider.disconnect(); } catch (e) {}
                                }
                            } else if (wallet.id === 'solflare' && (window.solflare || (window.solana && window.solana.isSolflare))) {
                                provider = window.solflare || window.solana;
                                if (provider.isConnected && provider.disconnect) {
                                    try { await provider.disconnect(); } catch (e) {}
                                }
                            }
                            if (!provider) {
                                // 커스텀 설치 안내 모달 표시
                                const messageElement = document.getElementById('install-modal-message');
                                if (messageElement) {
                                    messageElement.textContent = `${wallet.name} wallet extension is not installed. Please install the extension and try again.`;
                                }
                                
                                // Install Wallet 버튼 클릭 시 해당 지갑 설치 페이지로 이동
                                installBtn.onclick = () => {
                                    const installUrl = getInstallUrl(wallet.id);
                                    if (installUrl) {
                                        window.open(installUrl, '_blank');
                                    }
                                    installModal.style.display = 'none';
                                };
                                
                                // Close 버튼 클릭 시 모달 닫기
                                closeInstallBtn.onclick = () => {
                                    installModal.style.display = 'none';
                                };
                                
                                installModal.style.display = 'flex';
                                return;
                            }
                            try {
                                // Force user to manually connect by not using onlyIfTrusted
                                await provider.connect();
                                if (provider.publicKey || (provider.publicKey && provider.publicKey.toString)) {
                                    const address = provider.publicKey ? provider.publicKey.toString() : (provider.publicKey || '');
                                    const shortAddr = address.slice(0, 4) + '...' + address.slice(-4);
                                    
                                    // 연결 상태 업데이트
                                    connectedWalletType = wallet.id;
                                    connectedAddress = address;
                                    
                                    connectBtn.textContent = `Disconnect: ${shortAddr}`;
                                    // Form address input
                                    const prayerWalletInput = document.getElementById('prayer-wallet-address');
                                    const bugWalletInput = document.getElementById('bug-wallet-address');
                                    if (prayerWalletInput) prayerWalletInput.value = address;
                                    if (bugWalletInput) bugWalletInput.value = address;
                                }
                                modal.style.display = 'none';
                                if (provider.on) {
                                    provider.on('disconnect', onDisconnect);
                                }
                            } catch (e) {
                                alert('Failed to connect wallet. Please check your wallet app or extension and try again.\n' + (e && e.message ? e.message : e));
                            }
                        };
                        const logo = document.createElement('img');
                        logo.src = wallet.logo;
                        logo.alt = wallet.name + ' Logo';
                        logo.className = 'wallet-logo';
                        btn.appendChild(logo);
                        const span = document.createElement('span');
                        span.textContent = `Connect ${wallet.name}`;
                        btn.appendChild(span);
                        modalContent.appendChild(btn);
                    });
                    modal.style.display = 'flex';
                });
            }
            // 모달 외부 클릭 시 닫기
            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
                if (event.target === disconnectModal) {
                    disconnectModal.style.display = "none";
                }
                if (event.target === installModal) {
                    installModal.style.display = "none";
                }
            });

            // 연결된 상태 관리
            let connectedWalletType = null;
            let connectedAddress = null;

            // 실제 연결 함수
            async function connectWallet(type) {
                try {
                    let provider = null;
                    if (type === 'phantom' && window.solana && window.solana.isPhantom) {
                        provider = window.solana;
                        // 기존 연결 강제 해제(로그아웃)
                        if (provider.isConnected && provider.disconnect) {
                            try { await provider.disconnect(); } catch (e) {}
                        }
                    } else if (type === 'backpack' && window.solana && window.solana.isBackpack) {
                        provider = window.solana;
                    } else if (type === 'solflare' && (window.solflare || (window.solana && window.solana.isSolflare))) {
                        provider = window.solflare || window.solana;
                    }
                    if (!provider) {
                        alert('Wallet provider not found.');
                        return;
                    }
                    // 연결 - 사용자가 명시적으로 연결을 요청하도록 함
                    const connectResult = await provider.connect();
                    // 연결 성공 시에만 주소 UI 반영
                    if (provider.publicKey || (provider.publicKey && provider.publicKey.toString)) {
                        connectedWalletType = type;
                        connectedAddress = provider.publicKey ? provider.publicKey.toString() : (provider.publicKey || '');
                        // UI 업데이트
                        const shortAddr = connectedAddress.slice(0, 4) + '...' + connectedAddress.slice(-4);
                        connectBtn.textContent = `Disconnect: ${shortAddr}`;
                        // 폼에 주소 입력
                        const prayerWalletInput = document.getElementById('prayer-wallet-address');
                        const bugWalletInput = document.getElementById('bug-wallet-address');
                        if (prayerWalletInput) prayerWalletInput.value = connectedAddress;
                        if (bugWalletInput) bugWalletInput.value = connectedAddress;
                    }
                    // 모달 닫기
                    modal.style.display = 'none';
                    // disconnect 이벤트 등록
                    if (provider.on) {
                        provider.on('disconnect', onDisconnect);
                    }
                } catch (e) {
                    alert('Failed to connect wallet: ' + (e && e.message ? e.message : e));
                }
            }
            // Disconnect 처리
            function onDisconnect() {
                connectedWalletType = null;
                connectedAddress = null;
                connectBtn.textContent = 'Connect Wallet';
                const prayerWalletInput = document.getElementById('prayer-wallet-address');
                const bugWalletInput = document.getElementById('bug-wallet-address');
                if (prayerWalletInput) prayerWalletInput.value = '';
                if (bugWalletInput) bugWalletInput.value = '';
                // 연결 정보 삭제
                localStorage.removeItem('wallet_connected');
            }
            // Disconnect 버튼 동작은 위의 이벤트 리스너에서 처리됨
            // 새로고침 후 자동 재연결 로직
            // async function tryAutoReconnect() {
            //     const lastWallet = localStorage.getItem('wallet_connected');
            //     if (!lastWallet) return;
            //     let provider = null;
            //     if (lastWallet === 'phantom' && window.solana && window.solana.isPhantom) {
            //         provider = window.solana;
            //     } else if (lastWallet === 'backpack' && window.solana && window.solana.isBackpack) {
            //         provider = window.solana;
            //     } else if (lastWallet === 'solflare' && (window.solflare || (window.solana && window.solana.isSolflare))) {
            //         provider = window.solflare || window.solana;
            //     }
            //     if (!provider) return;
            //     try {
            //         // onlyIfTrusted: true 옵션으로 자동 재연결 시도
            //         await provider.connect({ onlyIfTrusted: true });
            //         connectedWalletType = lastWallet;
            //         connectedAddress = provider.publicKey ? provider.publicKey.toString() : (provider.publicKey || '');
            //         // UI 업데이트
            //         const shortAddr = connectedAddress.slice(0, 4) + '...' + connectedAddress.slice(-4);
            //         connectBtn.textContent = `Disconnect: ${shortAddr}`;
            //         // 폼에 주소 입력
            //         const prayerWalletInput = document.getElementById('prayer-wallet-address');
            //         const bugWalletInput = document.getElementById('bug-wallet-address');
            //         if (prayerWalletInput) prayerWalletInput.value = connectedAddress;
            //         if (bugWalletInput) bugWalletInput.value = connectedAddress;
            //     } catch (e) {
            //         // 자동 재연결 실패 시 무시
            //     }
            // }
            // tryAutoReconnect(); // 자동 재연결 함수 및 호출 제거
        });
    </script>
    <script>
        // 화이트페이퍼 버튼 클릭 시 whitepaper.html로 이동
        document.addEventListener('DOMContentLoaded', function() {
            var wpBtn = document.getElementById('whitepaper-btn');
            if(wpBtn) {
                wpBtn.addEventListener('click', function() {
                    showWhitepaper();
                });
            }
        });
    </script>
    <script>
    // Mark 이미지를 Shadow DOM에 렌더링하여 Tailwind 등 외부 CSS 영향 100% 차단
    function renderMarkImage() {
        const container = document.getElementById('mark-image-shadow-root');
        if (!container) return;
        if (!container.shadowRoot) {
            const shadow = container.attachShadow({mode: 'open'});
            shadow.innerHTML = `
                <style>
                    img {
                        display: block;
                        max-width: 100%;
                        width: auto;
                        height: auto;
                        border-radius: 15px;
                        border: 3px solid #00ffc3;
                        box-shadow: 0 0 25px rgba(0, 255, 195, 0.4);
                        margin: 0 auto;
                        box-sizing: border-box;
                    }
                    .image-caption {
                        margin-top: 15px;
                        font-style: italic;
                        color: #aaa;
                        text-align: center;
                    }
                </style>
                <img src="https://i.ibb.co/YTYLPXMQ/image.jpg" alt="Mark - Your Creator">
                <div class="image-caption">Meet Mark - Your Creator (probably debugging right now)</div>
            `;
        }
    }
    document.addEventListener('DOMContentLoaded', renderMarkImage);
    </script>
</body>
</html>